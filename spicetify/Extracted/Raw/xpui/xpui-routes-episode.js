"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,a)=>{a.d(t,{o:()=>r});var n=a(87577),i=a(49207);function r(){return{version:(0,n.W6)(i.GE)?2:1}}},40771:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67154),i=a.n(n),r=a(67294),l=a(67892);const s=({href:e,children:t,...a})=>r.createElement(l.Z,i()({to:e},a),t)},90110:(e,t,a)=>{a.d(t,{q:()=>C,o:()=>x});var n=a(67294),i=a(94184),r=a.n(i),l=a(69518),s=a.n(l),o=a(10986),c=a(59823),d=a(20657),m=a(83692),u=a(26010),p=a(69010),g=a(80946),E=a(6116),y=a(38209),k=a(40080);const b="l_MW0G9qeeCKlVJwBykT",f="BKsbV2Xl786X9a09XROH",v="HbKLiGoYM4dpuK8L4TMX",h="_APVWqivXc4YqgsnpFkP",N="VmwiDoU6RpqyzK_n7XRO",S="rEx3EYgBzS8SoY7dmC6x",P="z3zia5snl987x676qe5w";let C;!function(e){e[e.sm=24]="sm",e[e.md=32]="md"}(C||(C={}));const T=e=>{const{currentTarget:t,detail:a}=e;a>0&&t&&t.blur()},x=({uri:e,isFollowing:t,onFollow:a,size:i=C.sm,className:l,onClick:x=(()=>{})})=>{const I={"--size":`${i}px`},{useDownloading:w,useDownloadCapability:D}=(0,n.useContext)(u.I),[U,A]=(0,n.useState)(!1),[M,L]=D(s().isEpisode(e)),[R,O]=(0,n.useState)(!1),{currentAvailability:F,progress:B,beginDownload:_,clearDownload:W}=w(e);((e,t)=>{const a=(0,y.r)(),i=(0,n.useRef)(!1);(0,n.useEffect)((()=>{e===p.V8.DOWNLOADING&&!1===i.current&&(i.current=!0,a.say(d.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);const r=(0,k.D)(e);(0,n.useEffect)((()=>{r===p.V8.DOWNLOADING&&e===p.V8.YES&&(i.current=!1,a.say(d.ag.get("download.complete")))}),[a,r,e])})(F,B);const z=(0,n.useCallback)((e=>{L===p.v$.DOWNLOADING_NOT_ALLOWED?(O(!0),x(e,p.mc.notAllowed)):(!1===t?(a(),A(!0)):_(),x(e,p.mc.download)),T(e)}),[_,L,t,x,a]),K=(0,n.useCallback)((e=>{W(),T(e),x(e,p.mc.clear)}),[W,x]);return(0,n.useEffect)((()=>{!0===U&&!0===t&&(_(),A(!1))}),[t,U,_]),M===p.PQ.NO_DOWNLOAD_CAPABILITY?null:L===p.v$.DOWNLOADING_NOT_ALLOWED?n.createElement("div",{className:f},n.createElement(m.w,{label:d.ag.get("download.download")},n.createElement("button",{className:r()(v,l),role:"switch",onClick:z,"aria-label":d.ag.get("download.download"),"aria-checked":!1},n.createElement(o.D,{iconSize:i}))),R&&n.createElement("div",{className:P},n.createElement(g.E,{withTopLeftPointer:!0,horizontal:!0,onClose:()=>{O(!1)}},d.ag.get("download.upsell")))):F===p.V8.YES?n.createElement(m.w,{label:d.ag.get("download.remove")},n.createElement("button",{className:r()(v,l,h),role:"switch",onClick:K,"aria-label":d.ag.get("download.remove"),"aria-checked":!0},n.createElement(c.E,{iconSize:i}))):F===p.V8.NO?n.createElement(m.w,{label:d.ag.get("download.download")},n.createElement("button",{className:r()(v,l),role:"switch",onClick:z,"aria-label":d.ag.get("download.download"),"aria-checked":!1},n.createElement(o.D,{iconSize:i}))):n.createElement("div",{className:r()(N,l),role:"switch","aria-checked":!0},n.createElement(m.w,{label:d.ag.get("download.cancel")},n.createElement("button",{style:I,className:r()(v,b,l),onClick:K,"aria-label":d.ag.get("download.cancel")})),n.createElement("span",{style:I,className:r()(S,b)},n.createElement(E.e,{"aria-valuetext":d.ag.get("progress.downloading-tracks"),percentage:B.percentage,size:i})))}},37483:(e,t,a)=>{a.d(t,{p:()=>d,q:()=>o.q});var n=a(67294),i=a(46458),r=a(4383),l=a(8475),s=a(56802),o=a(90110);const c=n.memo((function({uri:e,size:t=o.q.md,className:a,onClick:c}){const[d,m]=(0,r.Z)(e),u=(0,i.I0)(),p=(0,s.o)(),g=(0,n.useCallback)((()=>{p({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),m(!d),u(d?(0,l.SS)():(0,l.kK)())}),[p,e,d,m,u]);return n.createElement(o.o,{className:a,isFollowing:d,onFollow:g,onClick:c,uri:e,size:t})})),d=n.memo((function(e){return n.createElement(c,e)}))},22578:(e,t,a)=>{a.d(t,{$:()=>u});var n=a(67294),i=a(64593),r=a(20657),l=a(69691),s=a(8341),o=a(89952),c=a(52883),d=a(24183);function m(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const u=({children:e,usePlayingItem:t})=>{let a=m(e);(e=>{const{mainLandmarkRef:t}=(0,d.Oh)(),a=(0,c.k6)(),i=a.location?.state?.preventMoveFocus,r=(0,n.useRef)(a.length<2);r.current=a.length<2,(0,n.useEffect)((()=>{const a=t.current;!i&&!r.current&&a&&e&&(a.setAttribute("aria-label",e),a.focus())}),[e,t,i])})(e);const{isPlaying:u}=(0,l.IK)(),p=(0,s.Y)((e=>e?.item));return p&&(u||t)&&((0,o.G_)(p)?a=[p.name,p.artists.map((e=>e.name)).join(r.ag.getSeparator())].join(" • "):(0,o.iw)(p)?a=[p.name,p.show.name].join(" • "):(0,o.k6)(p)&&(a=m(r.ag.get("ad-formats.advertisement")))),n.createElement(i.q,{defaultTitle:"Spotify",defer:!1},n.createElement("title",null,a))}},56775:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$t});var n=a(67294),i=a(46458),r=a(52883),l=a(69518),s=a.n(l),o=a(87577),c=a(20657),d=a(70369),m=a(1663),u=a(24209),p=a(84629),g=a(95661),E=a(22345),y=a(42273),k=a(59482),b=a(72907),f=a(67892),v=a(43914),h=a(95806),N=a(85592);const S="activation-trigger-mme",P=({episodeUri:e,showUri:t,isLocked:a,isPlaying:r,isPlayDisabled:l,playButtonPlayLabel:o,playButtonPauseLabel:c,onClick:d})=>{const m=(0,i.v9)((e=>e.platform?.isBrowser)),u=n.createElement(h.l,{showUri:t,enabled:a,renderInline:!1},n.createElement(N.fh,{size:"lg",onClick:d,isPlaying:r,disabled:l,locked:a,ariaPlayLabel:o,ariaPauseLabel:c}));return m?n.createElement(v.D,{id:S,targetURI:s().from(e),fadeOut:!0},u):u};var C=a(30947),T=a(32626),x=a(18261),I=a(57978),w=a(43620),D=a(84242),U=a(8341),A=a(5944),M=a(7073),L=a(92408),R=a(84788),O=a(60410),F=a(40771),B=a(31610);const _="UVWRbDQd2DM0ShkvMq54",W="Eoy1M3AAKeAUI9cNWsuq",z="rmgkmccGmTBvrw7gXMyS",K="JKIiOrx9EhZCkyBsu7YI";function Z(e){return e?.replace(/T.*/,"")||""}function V(e){const t=s().from(e);return`/show/${s().hexToId(t?.id||"")}`}const X=n.memo((function({chapter:e}){const{name:t,uri:a,playedState:r,contentRating:l,duration:s,releaseDate:o,playability:d}=e,m=e.book,v=e.coverArt.length?e.coverArt:m.coverArt||[],h=v[0]?.url,N=(0,w.Z)(h||null),S=(0,i.I0)(),[X,H]=(0,n.useState)(r.state===M.sY.Completed),{triggerPlay:Y,togglePlay:q,isPlaying:J,isActive:G}=(0,D.n)({uri:a},{featureIdentifier:"episode"}),$=(0,U.Y)((e=>(0,A.k)(e)??void 0)),j=(0,O.S)(e),{badges:Q}=(0,R.r)({contentRating:l?.label}),ee=(0,n.useCallback)((e=>{!d.playable&&Q.nineteen&&(e.stopPropagation(),S((0,p.RM)(a||"")))}),[a,d.playable,Q.nineteen,S]),te=(0,n.useCallback)((e=>{j||(G?q():Y({seekTo:e}))}),[j,G,q,Y]);(0,n.useEffect)((()=>{const e=new URLSearchParams(location.search);if(e.has("t")){const t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=s.milliseconds&&te(a)}}),[s,te]);const ae=!j&&!d.playable,ne=m.uri,ie=m.name,re=c.ag.get("tracklist.a11y.play",t,ie),le=c.ag.get("tracklist.a11y.pause",t,ie);return n.createElement("section",{"data-testid":"chapter",className:_},n.createElement(y.gF,{backgroundColor:N},n.createElement(k.W,null,n.createElement(b.i,{text:t})),n.createElement("div",{className:z},n.createElement(x._,{menu:n.createElement(E.r,{uri:a,isPlayed:X,onMarkAsPlayed:H,contextUri:a})},n.createElement(y.Oe,{loading:"eager",name:t,images:v,placeholderType:"episode",shape:y.Kc.ROUNDED_CORNERS}))),n.createElement(y.sP,null,n.createElement(y.dy,{small:!0,uppercase:!0},c.ag.get("web-player.audiobooks.chapter")),n.createElement(x._,{menu:n.createElement(E.r,{uri:a,isPlayed:X,onMarkAsPlayed:H,contextUri:a})},n.createElement(y.xd,{dragUri:a,dragLabel:t},n.createElement("span",{"data-testid":"chapterTitle"},t))),n.createElement(x._,{menu:n.createElement(E.r,{uri:a,isPlayed:X,onMarkAsPlayed:H,contextUri:a})},n.createElement(f.Z,{to:V(ne)},n.createElement(y.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"bookTitle"},ie)))))),n.createElement(C.o,{backgroundColor:N},n.createElement(C.F,null,Q.nineteen&&n.createElement(I.X,{className:W,size:16}),n.createElement(L.E,{size:L.$.LARGE,fullyPlayed:X,durationMs:s.milliseconds,releaseDate:Z(o?.isoString),resumePositionMs:r.playPositionMilliseconds,isPlaying:J,position:G&&$||void 0})),n.createElement(C.F,null,n.createElement("div",{onClick:ee},n.createElement(P,{episodeUri:a,showUri:ne,isLocked:j,onClick:()=>{te(r.playPositionMilliseconds)},isPlaying:J,isPlayDisabled:ae,playButtonPlayLabel:re,playButtonPauseLabel:le})),!j&&n.createElement(B.o,{uri:a,bookUri:ne}),n.createElement(T.yj,{menu:n.createElement(E.r,{uri:a,isPlayed:X,onMarkAsPlayed:H,contextUri:a})},n.createElement(g.z,{label:c.ag.get("more.label.context",t)})))),n.createElement("div",{className:"contentSpacing"},n.createElement(u.P,{buttonSize:"sm",href:ne,component:F.Z,className:K},"See all chapters")))}));var H=a(67154),Y=a.n(H),q=a(99922),J=a(74849);const G=(0,n.lazy)((()=>Promise.all([a.e(1814),a.e(8396)]).then(a.bind(a,88396))));function $(e){const t=(0,J.m)(),a=(0,q.o)();return t?n.createElement(n.Suspense,{fallback:!0},n.createElement(G,Y()({reason:"Episode page"},a,e))):null}const j="dpN5ViPOceUWNB5EQPHN",Q="vBcxPq3E2okwgXOkVPEM",ee="HCCBXwdFvq6omWW2hR0N",te="bJOPO5Zo7dpjSVDwEpSw",ae="TXdDDpokVTyJzDEDWHHf",ne="HaSbtEVJnxBsaJ5SRi0M",ie="YldGldlfaI9myEGXQf9g",re="qJHVIpJn1vLPWsAKfTEZ",le="wSIzjkVlr0Zdy7di2vRm",se="hYS_K1NATGyWt6tCSRqQ",oe="hVVaM4pF9arpQ8Nvn2a1",ce="zf0Eac1LugsHUacz74Zf",de="TnNaqxbaI0hzhBQZ7wE0",me="zSw1lG1TNe_xm6KTqtCv",ue="MlEQDkXnjdKKJueJ9kkB",pe="jg0xlyD1yjh0DPNG6eOg",ge="QiHXpFb4dLZNOFe5gpp3";var Ee=a(28760),ye=a(20238),ke=a(99450),be=a(49207);const fe=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,o.W6)(be.Xd)?n.createElement("div",{className:ie},n.createElement("div",{className:re},n.createElement(Ee.Dy,{variant:"balladBold",semanticColor:"textBase"},e),n.createElement(Ee.Dy,{semanticColor:"textBase"},t)),n.createElement(ke.D,{buttonSize:"sm",colorSet:"invertedLight",href:s().from(i).toURLPath(!0),component:F.Z},a)):null,ve=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:r,onExpanded:l,onTimeStampClick:s,playability:o,showHeader:d=!0})=>{const m=(i||t)&&d;return n.createElement(n.Fragment,null,m&&n.createElement(Ee.Dy,{as:"h2",variant:"canon",semanticColor:"textBase",className:ee},c.ag.get("episode.description-title")),t&&n.createElement(fe,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&n.createElement(ye.o,{className:Q,onTimeStampClick:s,maxLines:4,onExpanded:l,content:(a||"").trim(),htmlContent:e&&r?r:void 0,LinkComponent:f.Z,enableTimestamps:o.playable}))};var he,Ne=a(94184),Se=a.n(Ne),Pe=a(70131),Ce=a(29325),Te=a(77991),xe=a(3822),Ie=a(13406),we=a(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(he||(he={}));const De=n.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:a}){const[i,r]=(0,n.useState)(he.DESCRIPTION),{scrollNodeRef:l}=n.useContext(we.VX),{ref:s,inView:o}=(0,Pe.YD)({threshold:[1],root:l.current,rootMargin:`-${Ie.K1+1}px 100000px 0px 100000px`}),d=(0,n.useRef)(null),m=(0,n.useCallback)((e=>{d.current=e,s(e)}),[s]);return(0,n.useEffect)((()=>{const e=d.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const a=e-Ie.K1;t.scrollTop>a&&t.scrollTo({top:a})}),[l,i]),n.createElement(Ce.l,{list:n.createElement(Te.F,{className:Se()(ue,{[pe]:!o}),ref:m},n.createElement(xe.c,{label:c.ag.get("web-player.episode.description"),sentenceCase:!0,active:i===he.DESCRIPTION,onClick:()=>r(he.DESCRIPTION),className:Se()(ge,{[le]:i===he.DESCRIPTION})}),n.createElement(xe.c,{label:c.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:i===he.TRANSCRIPT,onClick:()=>r(he.TRANSCRIPT),className:Se()(ge,{[le]:i===he.TRANSCRIPT})}))},null===e||i===he.DESCRIPTION?t:a)}));var Ue=a(49104);const Ae=n.memo((function({transcriptSections:e,onTimeStampClick:t,episodeUri:a}){return n.createElement(n.Fragment,null,n.createElement("div",{className:oe},n.createElement(Ee.Dy,{variant:"viola",semanticColor:"textBase"},c.ag.get("web-player.episode.transcript.disclaimer"))),e.map(((e,i)=>{const r=`transcript-section-${i}`;return n.createElement("div",{className:se,key:r},n.createElement("button",{className:ce,onClick:()=>t(e.startMs,void 0,r)},n.createElement(v.D,{id:r,targetURI:s().from(a),fadeOut:!0},n.createElement(Ee.Dy,{variant:"finaleBold",semanticColor:"textSubdued",className:de},(0,Ue.m)(e.startMs)))),e.content.map(((e,t)=>n.createElement(Ee.Dy,{variant:"viola",semanticColor:"textBase",className:me,key:`transcript-text-${t}`,dir:"auto"},e))))})))}));var Me=a(16061);const Le="axX_dOb7KXxh2BhADfuQ",Re="DIz7crU76YDtXXLx34nF",Oe="R2a58pDnuIWBldpbVPRr",Fe=n.memo((function({title:e,episodes:t,className:a}){return n.createElement("div",{className:Se()(Le,a)},n.createElement(Ee.Dy,{as:"h2",variant:"canon",className:Re},e),n.createElement("div",{className:Oe},t.map((e=>n.createElement(Me.B,Y()({key:e.uri},e))))))}));var Be=a(98984);const _e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getRecommendedEpisodes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episode"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recommendedEpisodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episode"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"podcast"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]},We=({uri:e,limit:t})=>{const{data:a}=(i={uri:e,limit:t},r={cacheTime:15*Be.y},(0,Be.a)(_e,i,r));var i,r;const l=a?.episode?.recommendedEpisodes.items||[];return l?.length>0?n.createElement(Fe,{title:c.ag.get("mwp.entity.might.like"),episodes:l.map(((e,t)=>({index:t,id:e.episode.id,uri:e.episode.uri,name:e.episode.name,description:e.episode.description??"",isExplicit:e.episode.contentRating?.label===M.KS.Explicit,releaseDate:e.episode.releaseDate?.isoString,is19PlusOnly:e.episode.contentRating?.label===M.KS.NineteenPlus,durationMilliseconds:e.episode.duration.totalMilliseconds,images:e.episode.coverArt?.sources??[],showImages:e.episode.podcast.coverArt?.sources??[],resume_point:null,sharingInfo:null})))}):null};var ze=a(74600),Ke=a(28248),Ze=a(54280),Ve=a(38470),Xe=a(86213),He=a(27481),Ye=a(82760),qe=a(42922),Je=a(46585);const Ge="OYehkMWcGJRKPkByp46K",$e="uc1bXkrZqrCz0CMK4lBb",je="qZeibBbA3SVClzEueYND",Qe=({episodeUri:e,index:t,duration:a,start:i,stop:r,name:l,uri:s,artists:o,album:d,playable:m})=>{const{isActive:u,isPlaying:p,onClick:g}=(0,Je.k)({episodeUri:e,start:i,stop:r});return n.createElement(qe.ZP,{value:"row",index:t},n.createElement(T.xV,{trigger:"right-click",action:"open",menu:n.createElement(Xe.$,{uri:s})},n.createElement(Ye.c,{uri:s,index:t,ariaRowIndex:t+1,dragMetadata:{name:l,createdBy:o?.[0].name??""},onTriggerPlay:g,isActive:u,isPlayable:m},n.createElement(He.vZ,{ariaColIndex:0},n.createElement(He.Du,{uri:s,playAriaLabel:c.ag.get("tracklist.a11y.play",l,o?.[0].name),onClick:g,isPlaying:p,isActive:u},n.createElement(He.km,null,n.createElement("img",{className:$e,src:d.image,alt:d.name}))),n.createElement(He.vm,null,n.createElement(He.Wh,{titleText:l},l),n.createElement(He.K9,null,n.createElement(He.T6,{artists:o})))),n.createElement(He.UA,{ariaColIndex:1},n.createElement(He.BM,{uri:d.uri,name:d.name},d.name)),n.createElement(He.mU,{ariaColIndex:2},n.createElement(He.qS,{uri:s}),n.createElement(He.A$,{duration:a}),n.createElement(He.Zv,{menu:n.createElement(Xe.$,{uri:s,artists:o}),label:c.ag.get("more.label.track",l,o?.[0].name)})))))};const et=({uri:e,segmentCount:t})=>{const a=(0,Ze.G)(),i=(0,n.useCallback)((async(t,n)=>{const i=Math.ceil(t/2);try{return function(e,t,a){return e.reduce(((e,n,i)=>((i>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===n.type?e.push(function(e,t,a){return{type:"MUSIC",index:t,uri:a.uri,episodeUri:e,start:a.start,stop:a.stop,duration:a.duration,name:a.track.name,artists:a.track.artists,album:a.track.album,playable:a.track.playable}}(a,i,n)):"TALK"===n.type&&e.push(function(e,t,a){return{type:"TALK",index:t,uri:e,title:a.title,subtitle:a.subtitle,start:a.start,stop:a.stop,duration:a.duration,showUri:a.show.uri,showName:a.show.name}}(a,i,n)),e)),[])}(await a.getSegments(e,i,n),i,e)}catch(e){return[]}}),[a,e]),r=(0,n.useCallback)((t=>{switch(t.type){case"SPACER":return n.createElement("div",{key:t.id,className:je});case"MUSIC":return n.createElement(Qe,Y()({key:`${e}-${t.index}`},t));case"TALK":return n.createElement(ze.t,Y()({key:`${e}-${t.index}`},t));default:return(0,Ve.U)(t)}}),[e]),l=c.ag.get("music_and_talk.in_this_episode");return n.createElement("div",null,n.createElement(Ee.Dy,{as:"h2",variant:"canon",semanticColor:"textBase",className:Ge},l),n.createElement(Ke.Pv,{ariaLabel:l,hasHeaderRow:!0,rowPlaceholder:Ke.hU,columns:[Ke.QD.TITLE,Ke.QD.ALBUM_OR_SHOW,Ke.QD.DURATION],renderRow:r,fetchTracks:i,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"}))};var tt=a(43720),at=a.n(tt),nt=a(62100),it=a.n(nt);let rt;function lt(e){switch(e){case 0:case"UNKNOWN":return rt.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return rt.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return rt.MUSIC_TRACK;default:return rt.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(rt||(rt={}));const st={encode(e,t=it().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const a of e.sections)ot.encode(a,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const a=e instanceof it().Reader?e:new(it().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;a.pos<n;){const e=a.uint32();switch(e>>>3){case 1:i.version=a.string();break;case 2:i.episodeUri=a.string();break;case 3:i.publishedAt=a.string();break;case 4:i.sections.push(ot.decode(a,a.uint32()));break;case 5:i.language=a.string();break;case 6:i.curated=a.bool();break;default:a.skipType(7&e)}}return i},fromJSON:e=>({version:mt(e.version)?String(e.version):"",episodeUri:mt(e.episodeUri)?String(e.episodeUri):"",publishedAt:mt(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>ot.fromJSON(e))):[],language:mt(e.language)?String(e.language):"",curated:!!mt(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?ot.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>ot.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const ot={encode:(e,t=it().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&ct.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&dt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&ct.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const a=e instanceof it().Reader?e:new(it().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;a.pos<n;){const e=a.uint32();switch(e>>>3){case 1:i.type=a.int32();break;case 2:i.startMs=a.int32();break;case 3:i.plaintextContent=ct.decode(a,a.uint32());break;case 6:i.musicTrack=dt.decode(a,a.uint32());break;case 4:i.title=a.string();break;case 5:i.fallback=ct.decode(a,a.uint32());break;default:a.skipType(7&e)}}return i},fromJSON:e=>({type:mt(e.type)?lt(e.type):0,startMs:mt(e.startMs)?Number(e.startMs):0,plaintextContent:mt(e.plaintextContent)?ct.fromJSON(e.plaintextContent):void 0,musicTrack:mt(e.musicTrack)?dt.fromJSON(e.musicTrack):void 0,title:mt(e.title)?String(e.title):"",fallback:mt(e.fallback)?ct.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case rt.UNKNOWN:return"UNKNOWN";case rt.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case rt.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?ct.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?dt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?ct.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?ct.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?dt.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?ct.fromPartial(e.fallback):void 0,t}};const ct={encode(e,t=it().Writer.create()){for(const a of e.plaintext)t.uint32(10).string(a);return t},decode(e,t){const a=e instanceof it().Reader?e:new(it().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={plaintext:[]};for(;a.pos<n;){const e=a.uint32();if(e>>>3==1)i.plaintext.push(a.string());else a.skipType(7&e)}return i},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const dt={encode:(e,t=it().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const a=e instanceof it().Reader?e:new(it().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={uri:""};for(;a.pos<n;){const e=a.uint32();if(e>>>3==1)i.uri=a.string();else a.skipType(7&e)}return i},fromJSON:e=>({uri:mt(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function mt(e){return null!=e}function ut(e){return e.type===rt.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}it().util.Long!==at()&&(it().util.Long=at(),it().configure());const pt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,hasMusicAndTalkSegements:r,htmlDescription:l,onExpanded:s,onTimeStampClick:o,playability:d,segmentCount:m,showUrl:p,transcript:g,transcriptEnabled:E,uri:y})=>{const[k,b]=(0,n.useState)(null),f=(0,n.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return st.decode(new Uint8Array(e)).sections.map(ut)}return null}catch(e){return null}}(e);b(t)}),[]);(0,n.useEffect)((()=>{g&&g.length>0&&f(g[0].cdnUrl)}),[f,g]);const v=g=>n.createElement(n.Fragment,null,n.createElement(ve,{hasDescription:i,contentInformation:t,onTimeStampClick:o,onExpanded:s,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:l,playability:d,showHeader:g}),r&&n.createElement(et,{segmentCount:m,uri:y}),p&&n.createElement(u.P,{buttonSize:"sm",className:te,href:p,component:F.Z},c.ag.get("episode.see_all_episodes")),n.createElement($,{uri:y}),n.createElement(We,{uri:y,limit:6}));return n.createElement(n.Fragment,null,E&&g&&g?.length>0?n.createElement(De,{transcriptSections:k,descriptionContent:v(!1),transcriptContent:n.createElement(Ae,{transcriptSections:k||[],onTimeStampClick:o,episodeUri:y})}):v(!0))},gt="o6AdXY67I_0xmTg8LBCI",Et="MMZAjWZzcPpNIE06SNuf",yt="Ccgbgvk9PwclKl5rA6Zj",kt="NHVXJRN6IZANogQjMWei",bt="orBUEK6aY0SZVOnrDerw",ft="ym1d5PDeTaJLIK0SspBF",vt="Hko6tpIRefr4NKiTEemO",ht="ptUwXq9IK8IQAOE2UiDA",Nt=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,o.W6)(be.Xd)?n.createElement("div",{className:vt},n.createElement("div",{className:ht},n.createElement(Ee.Dy,{variant:"balladBold",semanticColor:"textBase"},e),n.createElement(Ee.Dy,{semanticColor:"textBase"},t)),n.createElement(ke.D,{buttonSize:"sm",colorSet:"invertedLight",href:s().from(i).toURLPath(!0),component:F.Z},a)):null,St=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:r,onExpanded:l,onTimeStampClick:s,playability:o,showHeader:d=!0})=>{const m=(i||t)&&d;return n.createElement(n.Fragment,null,m&&n.createElement(Ee.Dy,{as:"h2",variant:"canon",semanticColor:"textBase",className:yt},c.ag.get("episode.description-title")),t&&n.createElement(Nt,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&n.createElement(ye.o,{className:Et,onTimeStampClick:s,maxLines:4,onExpanded:l,content:(a||"").trim(),htmlContent:e&&r?r:void 0,LinkComponent:f.Z,enableTimestamps:o.playable}))},Pt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:r,onExpanded:l,onTimeStampClick:s,playability:o,showUrl:d,uri:m})=>{return p=!0,n.createElement(n.Fragment,null,n.createElement(St,{hasDescription:i,contentInformation:t,onTimeStampClick:s,onExpanded:l,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:o,showHeader:p}),d&&n.createElement(u.P,{buttonSize:"sm",className:kt,href:d,component:F.Z},c.ag.get("episode.see_all_episodes")),n.createElement($,{uri:m}));var p},Ct="activation-trigger-mme",Tt=({episodeUri:e,showUri:t,isLocked:a,isPlaying:r,isPlayDisabled:l,playButtonPlayLabel:o,playButtonPauseLabel:c,onClick:d})=>{const m=(0,i.v9)((e=>e.platform?.isBrowser)),u=n.createElement(h.l,{showUri:t,enabled:a,renderInline:!1},n.createElement(N.fh,{size:"lg",onClick:d,isPlaying:r,disabled:l,locked:a,ariaPlayLabel:o,ariaPauseLabel:c}));return m?n.createElement(v.D,{id:Ct,targetURI:s().from(e),fadeOut:!0},u):u};var xt=a(56802),It=a(38894),wt=a(80219),Dt=a(62975),Ut=a(53646),At=a(23716),Mt=a(69691),Lt=a(37483),Rt=a(51871),Ot=a(25988),Ft=a(11414),Bt=a(20246),_t=a(52759);const Wt=({podcastShort:e,onPlayEpisode:t,isPlaying:a,isActive:r,isFullyPlayed:l,setIsFullyPlayed:s,backgroundColor:o,isLocked:d})=>{const{uri:m,playedState:u,contentRating:E,playability:y}=e,k=(0,i.I0)(),[b]=(0,_t.z)(1e4,(e=>e?.item?.uri===m)),f=(0,U.Y)((e=>e?.duration)),{badges:v}=(0,R.r)({contentRating:E?.label}),h=(0,n.useCallback)((e=>{!y.playable&&v.nineteen&&(e.stopPropagation(),k((0,p.RM)(m||"")))}),[m,y.playable,v.nineteen,k]),N=!d&&!e.playability.playable,S=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),P=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),T=e.podcast?.uri;return n.createElement(C.o,{backgroundColor:o},n.createElement(C.F,null,v.nineteen&&n.createElement(I.X,{className:bt,size:16}),n.createElement(L.E,{size:L.$.LARGE,fullyPlayed:l,durationMs:r&&f?f:e.duration.milliseconds,releaseDate:Vt(e.releaseDate?.isoString),resumePositionMs:u.playPositionMilliseconds,isPlaying:a,position:r&&b||void 0})),n.createElement(C.F,null,n.createElement("div",{onClick:h},n.createElement(Tt,{episodeUri:e.uri,showUri:T,isLocked:d,onClick:()=>{t(u.playPositionMilliseconds,!1)},isPlaying:a,isPlayDisabled:N,playButtonPlayLabel:S,playButtonPauseLabel:P})),!d&&n.createElement(Lt.p,{uri:e.uri,showUri:T}),n.createElement(Rt.w,{uri:e.uri,size:Ft.q.md}),n.createElement(Bt.y,{menu:n.createElement(Ot.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:T,contextUri:e.uri,isPlayed:l,onMarkAsPlayed:s})},n.createElement(g.z,{label:c.ag.get("more.label.context",e.name)}))))};var zt=a(34325);const Kt=({podcastShort:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i})=>{const{uri:r,name:l,sharingInfo:s,playedState:o,episodeType:d,releaseDate:m,userCreated:u}=e,p=function(e,t,a,i,r){const l=t===M.Wf.Episode;return(0,zt.G3)(e,i,a,r)?n.createElement(zt.Fg,{isMusicAndTalk:l}):l?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(r,d||M.Wf.Unknown,o.playPositionMilliseconds,Vt(m?.isoString),o.state===M.sY.Completed),g=e.podcast?.uri;return n.createElement(y.gF,{backgroundColor:i},n.createElement(k.W,null,n.createElement(b.i,{text:e.name,dragUri:r,dragLabel:e.name})),n.createElement("div",{className:ft},n.createElement(x._,{menu:n.createElement(Ot.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:g,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(y.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:y.Kc.ROUNDED_CORNERS}))),n.createElement(y.sP,null,n.createElement(y.dy,{small:!0,uppercase:!0},p),n.createElement(x._,{menu:n.createElement(Ot.k,{uri:r,sharingInfo:s,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:a})},n.createElement(y.xd,{dragUri:r,dragLabel:l},l)),u?.userUri&&n.createElement(x._,{menu:n.createElement(Ot.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:g,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(f.Z,{to:u.userUri},n.createElement(y.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"showTitle"},u?.displayName))))))},Zt=({podcastShort:e})=>{const{uri:t,episodeType:a,description:r,htmlDescription:l,podcastSubscription:m,segmentsCount:u,podcast:p,contentInformation:g,playedState:E,coverArt:y}=e,[k,b]=(0,n.useState)(E.state===M.sY.Completed),f=(0,At.g)(),v=(0,xt.o)(),h=(0,o.W6)(be.Cz),N=(0,o.W6)(be.Be),S=void 0!==u&&u>0&&N,P=(0,o.W6)(be.WE,{loadingValue:!1}),C=(0,It.g)(),{triggerPlay:T,togglePlay:x,isActive:I}=(0,D.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:w,isActive:A}=(0,Mt.$o)(t),L=y[0].url,R=(0,Ut.Zj)(L||null),O=(0,U.Y)((e=>e?.isPaused??void 0)),F=(0,i.v9)((e=>e.platform?.isBrowser)),B=m.isPaywalled&&!m.isUserSubscribed,_=(0,wt.s)(e,p),W=(0,n.useCallback)(((e,n=!0,i)=>{const r=()=>{O?f.resume():f.pause()};if(B)return;let l="play";!w||0!==e&&n||(l="pause"),v({intent:l,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===M.Wf.Episode&&F?Dt.y.set((()=>({triggerId:i||Ct,triggerAction:null}))):I&&!n?C?r():x():A?r():C?_({seekTo:e}):T({seekTo:e})}),[B,w,v,t,a,F,A,I,C,O,f,x,_,T]),z=(0,n.useCallback)((()=>{v({intent:"expand-description",type:"click"})}),[v]);(0,n.useEffect)((()=>{const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",n=1e3*parseInt(a,10);n<=e.duration.milliseconds&&W(n)}}),[W,e.duration.milliseconds]);const K=!!r||h&&!!l,Z=e.podcast?.uri,V=s().from(Z)?.toURLPath(!0);return n.createElement("section",{"data-testid":"episode",className:gt},n.createElement(d.$,null,c.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})),n.createElement(Kt,{podcastShort:e,isFullyPlayed:k,setIsFullyPlayed:b,backgroundColor:R}),n.createElement(Wt,{podcastShort:e,onPlayEpisode:W,isPlaying:w,isActive:A||I,isFullyPlayed:k,setIsFullyPlayed:b,backgroundColor:R,isLocked:B}),n.createElement("div",{className:"contentSpacing"},n.createElement(Pt,{transcriptEnabled:P,transcript:e.transcript,hasDescription:K,contentInformation:g,onTimeStampClick:W,onExpanded:z,description:e.description,areHTMLDescriptionsEnabled:h,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:S,segmentCount:u,uri:e.uri,showUrl:V})))};function Vt(e){return e?.replace(/T.*/,"")||""}var Xt=a(52404),Ht=a(86649);const Yt=({episode:e,onPlayEpisode:t,isPlaying:a,isActive:r,isFullyPlayed:l,setIsFullyPlayed:s,backgroundColor:o,isLocked:d})=>{const{uri:m,playedState:u,contentRating:E,playability:y}=e,k=(0,i.I0)(),[b]=(0,_t.z)(1e4,(e=>e?.item?.uri===m)),f=(0,U.Y)((e=>e?.duration)),{badges:v}=(0,R.r)({contentRating:E?.label}),h=(0,n.useCallback)((e=>{!y.playable&&v.nineteen&&(e.stopPropagation(),k((0,p.RM)(m||"")))}),[m,y.playable,v.nineteen,k]),N=!d&&!e.playability.playable,S=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),T=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),x=e.podcast?.uri;return n.createElement(C.o,{backgroundColor:o},n.createElement(C.F,null,v.nineteen&&n.createElement(I.X,{className:ae,size:16}),n.createElement(L.E,{size:L.$.LARGE,fullyPlayed:l,durationMs:r&&f?f:e.duration.milliseconds,releaseDate:jt(e.releaseDate?.isoString),resumePositionMs:u.playPositionMilliseconds,isPlaying:a,position:r&&b||void 0})),n.createElement(C.F,null,n.createElement("div",{onClick:h},n.createElement(P,{episodeUri:e.uri,showUri:x,isLocked:d,onClick:()=>{t(u.playPositionMilliseconds,!1)},isPlaying:a,isPlayDisabled:N,playButtonPlayLabel:S,playButtonPauseLabel:T})),!d&&n.createElement(Lt.p,{uri:e.uri,showUri:x}),n.createElement(Rt.w,{uri:e.uri,size:Ft.q.md}),n.createElement(Bt.y,{menu:n.createElement(Ot.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:x,contextUri:e.uri,isPlayed:l,onMarkAsPlayed:s})},n.createElement(g.z,{label:c.ag.get("more.label.context",e.name)}))))};function qt(e){const t=s().from(e);return`/show/${s().hexToId(t?.id||"")}`}const Jt=({episode:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i})=>{const{uri:r,name:l,sharingInfo:s,playedState:o,episodeType:d,releaseDate:m}=e,u=function(e,t,a,i,r){const l=t===M.Wf.Episode;return(0,zt.G3)(e,i,a,r)?n.createElement(zt.Fg,{isMusicAndTalk:l}):l?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(r,d||M.Wf.Unknown,o.playPositionMilliseconds,jt(m?.isoString),o.state===M.sY.Completed),p=e.podcast?.uri;return n.createElement(y.gF,{backgroundColor:i},n.createElement(k.W,null,n.createElement(b.i,{text:e.name,dragUri:r,dragLabel:e.name})),n.createElement("div",{className:ne},n.createElement(x._,{menu:n.createElement(Ot.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:p,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(y.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:y.Kc.ROUNDED_CORNERS}))),n.createElement(y.sP,null,n.createElement(y.dy,{small:!0,uppercase:!0},u),n.createElement(x._,{menu:n.createElement(Ot.k,{uri:r,sharingInfo:s,showUri:p,contextUri:r,isPlayed:t,onMarkAsPlayed:a})},n.createElement(y.xd,{dragUri:r,dragLabel:l},n.createElement("span",{"data-testid":"episodeTitle"},l))),n.createElement(x._,{menu:n.createElement(Ot.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:p,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(f.Z,{to:qt(p)},n.createElement(y.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"showTitle"},e.podcast?.name))))))},Gt=({episode:e})=>{const{uri:t,episodeType:a,description:r,htmlDescription:l,podcastSubscription:m,segmentsCount:u,podcast:p,contentInformation:g,playedState:E,coverArt:y}=e,[k,b]=(0,n.useState)(E.state===M.sY.Completed),f=(0,At.g)(),v=(0,xt.o)(),h=(0,o.W6)(be.Cz),N=(0,o.W6)(be.Be),P=void 0!==u&&u>0&&N,C=(0,o.W6)(be.WE,{loadingValue:!1}),T=(0,It.g)(),{triggerPlay:x,togglePlay:I,isActive:w}=(0,D.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:A,isActive:L}=(0,Mt.$o)(t),R=y[0].url,O=(0,Ut.Zj)(R||null),F=(0,U.Y)((e=>e?.isPaused??void 0)),B=(0,i.v9)((e=>e.platform?.isBrowser)),_=m.isPaywalled&&!m.isUserSubscribed,W=(0,wt.s)(e,p),z=(0,n.useCallback)(((e,n=!0,i)=>{const r=()=>{F?f.resume():f.pause()};if(_)return;let l="play";!A||0!==e&&n||(l="pause"),v({intent:l,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===M.Wf.Episode&&B?Dt.y.set((()=>({triggerId:i||S,triggerAction:null}))):w&&!n?T?r():I():L&&!n?r():T?W({seekTo:e}):x({seekTo:e})}),[_,A,v,t,a,B,L,w,T,F,f,I,W,x]),K=(0,n.useCallback)((()=>{v({intent:"expand-description",type:"click"})}),[v]);(0,n.useEffect)((()=>{if(e){const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",n=1e3*parseInt(a,10);n<=e.duration.milliseconds&&z(n)}}}),[e]);const Z=!!r||h&&!!l,V=e.podcast?.uri,X=s().from(V)?.toURLPath(!0);return n.createElement("section",{"data-testid":"episode",className:j},n.createElement(d.$,null,c.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})),n.createElement(Jt,{episode:e,isFullyPlayed:k,setIsFullyPlayed:b,backgroundColor:O}),n.createElement(Yt,{episode:e,onPlayEpisode:z,isPlaying:A,isActive:L||w,isFullyPlayed:k,setIsFullyPlayed:b,backgroundColor:O,isLocked:_}),n.createElement("div",{className:"contentSpacing"},n.createElement(pt,{transcriptEnabled:C,transcript:e.transcript,hasDescription:Z,contentInformation:g,onTimeStampClick:z,onExpanded:K,description:e.description,areHTMLDescriptionsEnabled:h,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:P,segmentCount:u,uri:e.uri,showUrl:X})))},$t=n.memo((function(){const{episodeId:e}=(0,r.UO)(),t=s().episodeURI(e).toURI(),a=(0,o.W6)(be.uB),i=(0,o.W6)(be.zR),l=(0,Xt.I)(t,a,i);return l?(0,Ht.Ey)(l)?n.createElement(n.Suspense,{fallback:null},n.createElement(X,{chapter:l})):(0,Ht.Qj)(l)?n.createElement(n.Suspense,{fallback:null},n.createElement(Zt,{podcastShort:l})):n.createElement(n.Suspense,{fallback:null},n.createElement(Gt,{episode:l})):n.createElement(m.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.podcast")})}));function jt(e){return e?.replace(/T.*/,"")||""}},40080:(e,t,a)=>{a.d(t,{D:()=>i});var n=a(67294);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},92408:(e,t,a)=>{a.d(t,{E:()=>C,$:()=>P});var n=a(67294),i=a(43315);const r="wIA_5Ypq0rltNPeZQpM4",l="Swi6YtNEFCCVz8l4y75v",s="pklLPOhfigdytL9bPoth",o="sb24Y8kdMZInJ8aI8dXT";class c extends n.PureComponent{static defaultProps={current:0,max:1};render(){const{ariaValueText:e,max:t,current:a}=this.props,i=t&&a?100*Math.min(1,a/t):0,c={transform:`translateX(-${100-i}%)`},d=e||`${Math.round(i)}%`;return n.createElement("div",{className:r,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d},n.createElement("div",{className:l}),n.createElement("div",{className:s},n.createElement("div",{"data-testid":"progressBarFg",className:o,style:c})))}}const d=c,m="qfYkuLpETFW3axnfMntO",u="jOd7lbjiyc_kvRJaAbeL",p="_q93agegdE655O5zPz6l",g="z7Yl7CIT1AB0y91f_moh",E="iLIlkUcfIq56KncGtX7u",y="nV50yZ6BR_TIuWP3l7b1",k="qLjIx_SzBEpDRA_q7kxQ";var b=a(28760),f=a(26461),v=a(20657),h=a(94184),N=a.n(h),S=a(33985);let P;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(P||(P={}));const C=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:r,fullyPlayed:l,durationMs:s,size:o=P.SMALL,position:c=t}=e;return n.createElement("div",{className:N()(m,{[u]:o===P.LARGE})},a?n.createElement(b.Dy,{as:"p",variant:"mesto",className:p},(0,i.rL)((0,i.RX)(a))):null,(()=>{if(l&&!r)return n.createElement("div",{className:E},n.createElement(b.Dy,{as:"p",variant:"mesto",className:g},v.ag.get("episode.played")),n.createElement(f.N,{iconSize:16,className:k}));if(c>0||r){const e=Math.ceil(Math.max(s-c,0));return n.createElement("div",{className:E},n.createElement(b.Dy,{as:"p",variant:"mesto",className:g},n.createElement(S.ng,{durationMs:e})))}return n.createElement(b.Dy,{as:"p",variant:"mesto",className:p},n.createElement(S.nL,{durationMs:s}))})(),!l&&c>0||r?n.createElement("div",{className:y},n.createElement(d,{current:c,max:s,isEnabled:!1})):null)}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map