"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1289],{70369:(e,t,a)=>{a.d(t,{$:()=>l.$});var l=a(22578)},19565:(e,t,a)=>{a.d(t,{u:()=>g});var l=a(67294),r=a(94184),n=a.n(r),i=a(28760),o=a(99450),s=a(51775),c=a(40771);const A="FvfvGU3jvHRskUU9v9_8",E="Q9AlbZn2EGzy3MTWXa8X",u="mxmxS0y8LiwSs5nueKPT",d="GXxVAveNFStY3pBI_NO4",m="eHcXC2s97InYP7rMNT0H",g=l.memo((function(e){const{children:t,message:a,title:r,linkTitle:g,linkTo:C,onClick:T,renderInline:D=!1}=e,{isXSOnly:y,isSMOnly:L}=(0,s.e)(),_=y||L;return l.createElement("section",{className:n()(A,{[E]:D})},t,l.createElement(i.Dy,{as:"h1",variant:_?"cello":"alto",className:d},r),l.createElement(i.Dy,{variant:_?"mesto":"ballad",className:m},a),g&&(C||T)&&l.createElement(o.D,{colorSet:"invertedLight",className:u,href:C,onClick:T,component:c.Z},g))}))},95289:(e,t,a)=>{a.d(t,{A:()=>y});var l=a(67294),r=a(94184),n=a.n(r),i=a(28760),o=a(62312),s=a(41374),c=a(20246),A=a(58238),E=a(91883),u=a(30005),d=a(36652),m=a(21691),g=a(28248);const C=({heading:e,selected:t,onSelect:a,options:r,sortOrder:n})=>{let o;return n&&(n===g.kn.ASC||n===g.kn.SECONDARY_ASC?o=l.createElement(A.C,{iconSize:16}):n!==g.kn.DESC&&n!==g.kn.SECONDARY_DESC||(o=l.createElement(E.B,{iconSize:16}))),l.createElement(u.v,null,e?l.createElement(d.F,null,e):null,r.map((({key:e,value:r})=>l.createElement(m.s,{role:"menuitemradio","aria-checked":e===t.key&&!o,key:e,onClick:()=>a(e),icon:e===t.key&&o},l.createElement(i.Dy,{variant:"mesto"},r)))))},T="w6j_vX6SF5IxSXrrkYw5",D="CbHJjxYxldG7uUPMYMaP";const y=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:A,sortOrder:E,variant:u="mesto",semanticColor:d,disabled:m,onClick:g})=>{const[y]=t;a||(a=y);const L=A?A(a):a!==y;return l.createElement(c.y,{menu:l.createElement(C,{selected:a,options:t,onSelect:r,sortOrder:E,heading:e})},((e,t,r)=>l.createElement("button",{className:n()(T,{[D]:L}),onClick:e=>{m||(g?.(e),t(e))},ref:r,type:"button"},l.createElement(i.Dy,{semanticColor:d,variant:u},a.value),e?l.createElement(o.U,{iconSize:16}):l.createElement(s.i,{iconSize:16}))))}},1834:(e,t,a)=>{a.d(t,{$:()=>o,Q:()=>i});var l=a(67294),r=a(22583),n=a(97641);const i=(0,l.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:n.oT.ADDED_AT}),o=l.memo((function({uri:e,children:t,defaultSortOption:a}){return l.createElement(r.r,{uri:e,defaultState:a,sortContext:i},t)}))},97641:(e,t,a)=>{a.d(t,{Aq:()=>E,Bf:()=>b,EY:()=>T,G5:()=>L,JV:()=>O,MY:()=>s,Ru:()=>c,ZP:()=>D,a6:()=>g,aY:()=>S,e3:()=>m,ei:()=>o,o$:()=>u,oT:()=>i,pT:()=>P,rJ:()=>h,u3:()=>f,w0:()=>_});var l=a(20657),r=a(74483),n=a(9659);let i;!function(e){e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER"}(i||(i={}));const o={"show-alphabetical":i.SHOW_ALPHABETICAL,"book-alphabetical":i.BOOK_ALPHABETICAL,"episode-alphabetical":i.EPISODE_ALPHABETICAL,"playlist-alphabetical":i.PLAYLIST_ALPHABETICAL,"album-alphabetical":i.ALBUM_ALPHABETICAL,"recently-added":i.ADDED_AT,"creator-name":i.CREATOR_NAME,"creator-name-alphabetical":i.CREATOR_NAME_ALPHABETICAL,"album-creator-name":i.ALBUM_CREATOR_NAME,"recently-played":i.RECENTLY_PLAYED,"playlist-most-relevant":i.MOST_RELEVANT,"playlist-custom-order":i.CUSTOM_ORDER},s={[i.RECENTLY_PLAYED]:{key:"recently-played",get value(){return l.ag.get("collection.sort.recently-played")}},[i.ADDED_AT]:{key:"recently-added",get value(){return l.ag.get("collection.sort.recently-added")}},[i.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return l.ag.get("collection.sort.alphabetical")}},[i.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return l.ag.get("collection.sort.alphabetical")}},[i.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return l.ag.get("collection.sort.alphabetical")}},[i.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return l.ag.get("collection.sort.alphabetical")}},[i.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return l.ag.get("collection.sort.creator")}},[i.CREATOR_NAME]:{key:"creator-name",get value(){return l.ag.get("collection.sort.creator")}},[i.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return l.ag.get("collection.sort.alphabetical")}},[i.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return l.ag.get("collection.sort.alphabetical")}},[i.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return l.ag.get("collection.sort.most-relevant")}},[i.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return l.ag.get("collection.sort.custom-order")}}},c=[i.ADDED_AT,i.ALBUM_ALPHABETICAL,i.CREATOR_NAME],A={[i.ADDED_AT]:{field:r.lY.ADDED_AT,order:r.As.DESC},[i.ALBUM_ALPHABETICAL]:{field:r.lY.NAME,order:r.As.ASC},[i.CREATOR_NAME]:{field:r.lY.ARTIST_NAME,order:r.As.ASC}},E=e=>{if(c.includes(e))return A[e]},u=[i.ADDED_AT,i.CREATOR_NAME_ALPHABETICAL],d={[i.ADDED_AT]:{field:r.hx.ADDED_AT,order:r.As.DESC},[i.CREATOR_NAME_ALPHABETICAL]:{field:r.hx.NAME,order:r.As.ASC}},m=e=>{if(u.includes(e))return d[e]},g=[i.ADDED_AT,i.SHOW_ALPHABETICAL],C={[i.ADDED_AT]:{field:r.hx.ADDED_AT,order:r.As.DESC},[i.SHOW_ALPHABETICAL]:{field:r.aW.NAME,order:r.As.ASC}},T=e=>{if(g.includes(e))return C[e]},D=[i.ADDED_AT,i.BOOK_ALPHABETICAL],y={[i.ADDED_AT]:r.VN.ADDED_AT,[i.BOOK_ALPHABETICAL]:r.VN.NAME},L=e=>{if(D.includes(e))return y[e]},_=[i.MOST_RELEVANT,i.RECENTLY_PLAYED,i.ADDED_AT,i.PLAYLIST_ALPHABETICAL,i.CUSTOM_ORDER],p={[i.ADDED_AT]:{field:n.bD.ADDED_AT,order:n.As.DESC},[i.RECENTLY_PLAYED]:{field:n.bD.RECENTLY_PLAYED,order:n.As.ASC},[i.PLAYLIST_ALPHABETICAL]:{field:n.bD.NAME,order:n.As.ASC},[i.MOST_RELEVANT]:{field:n.bD.RELEVANCE,order:n.As.DESC},[i.CUSTOM_ORDER]:void 0},P=e=>{if(_.includes(e))return p[e]},S=i.ADDED_AT,f=i.ADDED_AT,h=i.ADDED_AT,b=i.MOST_RELEVANT,O=i.ADDED_AT},86652:(e,t,a)=>{a.d(t,{h:()=>d});var l=a(67294),r=a(98816),n=a(61048),i=a(45342),o=a(54444),s=a(95289),c=a(1834),A=a(97641);const E=l.memo((function({sortOptions:e,onSort:t}){const{sortState:a,setSortState:r}=(0,l.useContext)(c.Q),n=(0,l.useCallback)((e=>{const a=A.ei[e];t?.(a),r(a)}),[t,r]),i=e.map((e=>A.MY[e])),o=A.MY[a];return l.createElement(s.A,{options:i,onSelect:n,selected:o})})),u="VuUpAVlUW_OfMfOcDEID",d=l.memo((function({filterPlaceholder:e,sortOptions:t}){const{spec:a,logger:s}=(0,o.fU)(r.createDesktopSearchBarEventFactory,{}),c=(0,l.useContext)(i.H),A=(0,l.useCallback)((()=>{s.logInteraction(a.filterFieldFactory().keyStrokeFilter())}),[s,a]),d=(0,l.useCallback)((()=>{s.logInteraction(a.filterFieldFactory().hitClearFilter())}),[s,a]),m=(0,l.useCallback)((()=>{s.logInteraction(a.sortButtonFactory().hitSort())}),[s,a]);return l.createElement("div",{className:u},c?.getCapabilities().canFilter?l.createElement(l.Suspense,{fallback:null},l.createElement(n.K,{placeholder:e,onFilter:A,onClear:d})):null,c?.getCapabilities().canSort?l.createElement(E,{sortOptions:t,onSort:m}):null)}))},47032:(e,t,a)=>{a.d(t,{$:()=>l.$,Q:()=>l.Q});var l=a(1834)},38911:(e,t,a)=>{a.d(t,{Aq:()=>l.Aq,Bf:()=>l.Bf,EY:()=>l.EY,G5:()=>l.G5,JV:()=>l.JV,Ru:()=>l.Ru,ZP:()=>l.ZP,a6:()=>l.a6,aY:()=>l.aY,e3:()=>l.e3,o$:()=>l.o$,oT:()=>l.oT,pT:()=>l.pT,rJ:()=>l.rJ,u3:()=>l.u3,w0:()=>l.w0});var l=a(97641)},2708:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ae});var l=a(67294),r=a(24078),n=a(20657),i=a(19565),o=a(1663),s=a(1838),c=a(22423),A=a(47032),E=a(38911),u=a(4236),d=a(53646),m=a(45342),g=a(84242),C=a(89952),T=a(70369),D=a(23609),y=a(55120),L=a(86652),_=a(30947),p=a(55911),P=a(74483);const S={[P.yW.NAME]:s.hI.TITLE,[P.yW.SHOW_NAME]:s.hI.SHOW,[P.yW.ADDED_AT]:s.hI.ADDED_AT},f=[E.oT.ADDED_AT,E.oT.CREATOR_NAME,E.oT.EPISODE_ALPHABETICAL],h={[E.oT.ADDED_AT]:{field:P.yW.ADDED_AT,order:P.As.DESC},[E.oT.CREATOR_NAME]:{field:P.yW.SHOW_NAME,order:P.As.ASC},[E.oT.EPISODE_ALPHABETICAL]:{field:P.yW.NAME,order:P.As.ASC}},b=e=>{if(f.includes(e))return h[e]},O=e=>{if(!f.includes(e))return;const t=b(e);if(!t?.field)return;const a=S[t.field];if(!a)return;return s.Vd[a].map((e=>t.order?`${e} ${t.order}`:e)).join(",")};var R=a(96462);const I=({metadata:e,canSort:t,backgroundColor:a,isPlaying:r,isOnline:i,togglePlay:o})=>{const{uri:s,name:c}=e,A=e.totalLength>0;return l.createElement(_.o,{backgroundColor:a},l.createElement(_.F,null,A&&l.createElement(y.$,{onClick:()=>o(),isPlaying:r,size:p.qE.lg,uri:s,disabled:!i,ariaPlayLabel:n.ag.get("playlist.a11y.play",c),ariaPauseLabel:n.ag.get("playlist.a11y.pause",c)}),t&&l.createElement("div",{className:R.Z.searchBoxContainer},l.createElement(L.h,{filterPlaceholder:n.ag.get("playlist.search_in_playlist"),sortOptions:f}))))};var k=a(33241),N=a(42922),M=a(18864),v=a(37763),B=a.n(v),H=a(25988),x=a(68556),Y=a(95806),U=a(96525),w=a(99191),W=a(56802),$=a(18261),F=a(87257),V=a(57978),Z=a(75016),z=a(4383),G=a(26010),K=a(8341),X=a(5944),q=a(42781),J=a(84788);const Q={small:64,standard:300,large:640,xlarge:1024},j=l.memo((function({index:e,contextUri:t,episode:a,onRemove:r,usePlayContextItem:n}){const i=(0,l.useRef)(a.duration.milliseconds-a.timeLeft.milliseconds),o=a.uri,[s,A]=(0,l.useState)(0===a.timeLeft.milliseconds),{filter:E}=(0,l.useContext)(c.fo),d=(0,U.P)(),m=(0,w.O1)(),C=(0,M.jh)(),T=(0,W.o)(),[D]=(0,z.Z)(o,!0),{useCurrentAvailability:y}=(0,l.useContext)(G.I),[L]=y(o),_=(0,u.k)(),p=(0,K.Y)((e=>{if(e?.item?.uri===a.uri){const t=(0,X.k)(e)??0;return i.current=t,t}return 0})),{isPlaying:P,isActive:S,togglePlay:f}=n({uri:o,index:e}),{isPlaying:h,isActive:b,togglePlay:O}=(0,g.n)({uri:o,pages:[{items:[{type:q.p.EPISODE,uri:o,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,l.useEffect)((()=>{D||r()}),[D,r]),(0,l.useEffect)((()=>{P||a.duration.milliseconds<=i.current&&A(!0)}),[P,a.duration.milliseconds]);const I=(0,l.useCallback)((e=>{e||(i.current=0),A(e)}),[]),k=(0,l.useCallback)((()=>{T({type:"click",targetUri:o,intent:"navigate"})}),[o,T]),v=(0,l.useCallback)((()=>{_?(T({type:"click",intent:P?"pause":"play"}),f()):(T({type:"click",intent:h?"pause":"play"}),O())}),[_,P,h,T,f,O]),j=(0,l.useCallback)((e=>l.createElement(B(),{searchWords:[E],textToHighlight:e,findChunks:d,highlightClassName:R.Z.filterHighlight})),[E,d]),ee=a.podcastSubscription?.isPaywalled??!1,te=a.podcastSubscription?.isUserSubscribed??!1,{badges:ae}=(0,J.r)({isExplicit:a.isExplicit,isMOGEFRestricted:a.is19PlusOnly,isPaywalled:ee});let le=!1;return(S||!_&&b)&&(le=!0),D?l.createElement(N.ZP,{value:"row",index:e},l.createElement($._,{menu:l.createElement(H.k,{uri:o,showUri:a.show.uri,isPlayed:s,onMarkAsPlayed:I})},l.createElement(x.X,{requestId:a.requestId,index:e,uri:o,uid:o,size:C,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?Q[e.label]:null),height:e.height||(e.label?Q[e.label]:null)}))),isPaywalled:ee,isUserSubscribed:te,name:a.name,highlightText:j,showName:a.show.name,showUri:a.show.uri,description:a.description,isPlayable:a.isPlayable&&L,fullyPlayed:s,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:i.current,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const l=`${a.name} â€¢ ${a.show.name}`;m(e,[o],l,t)},handlePlaybackClick:v,handleClick:k,isCurrentlyPlaying:le,isPlaying:_?P:h,position:le?p:void 0,episodeSharingInfo:null,onMarkAsPlayed:I,badges:l.createElement(l.Fragment,null,ae.explicit&&l.createElement(F.N,null),ae.paid&&l.createElement(Z.g,null),ae.nineteen&&l.createElement(V.X,{size:16})),playButtonWrapper:e=>l.createElement(Y.l,{enabled:ee&&!te,showUri:a.show.uri},e)}))):null})),ee="p6DKqBcwmVtxmHt8ju43",te="_OxEpxzAgJiTENfolVUN",ae=l.memo((function({contextUri:e,usePlayContextItem:t}){const a=(0,l.useContext)(m.H),{sortState:r}=(0,l.useContext)(A.Q),[n,i]=(0,l.useState)({totalLength:0,offset:0,items:[],limit:50}),o=(0,l.useRef)(!1),s=(0,l.useRef)(0),E=(0,l.useRef)(0),{filter:u}=(0,l.useContext)(c.fo),d=(0,l.useCallback)((()=>{E.current++}),[]),{ref:g,breakpoint:C}=(0,M.Db)({[M.Uo.MEDIUM]:0,[M.Uo.LARGE]:600}),T=(0,l.useCallback)(((e=!1)=>{const t=s.current;null!==t&&(o.current||(o.current=!0,(async e=>{const t=await a.getEpisodes({offset:e-E.current,limit:50,sort:b(r),filter:u});return E.current=0,t})(Number(t)).then((a=>{i((l=>{const r=Number(a.offset)+a.items.length,n=e?[]:[...l.items];return n.splice(Number(t),a.items.length,...a.items),s.current=r<a.totalLength?r:null,{...a,items:n}})),o.current=!1}))))}),[u,a,r]);return(0,l.useEffect)((()=>{s.current=0,T(!0)}),[T]),l.createElement(M.ZU.Provider,{value:C},l.createElement(N.ZP,{value:"track-list"},l.createElement("div",{ref:g},l.createElement(k.C,{onReachBottom:T,triggerOnInitialLoad:!0},n.items.map(((a,r)=>l.createElement("div",{className:te,key:`${r}${a.uri}`},l.createElement("hr",{className:ee,"aria-hidden":!0}),l.createElement(j,{key:`${a.uri}/${r}`,index:r,episode:a,contextUri:e,onRemove:d,usePlayContextItem:t}))))))))}));var le=a(42273),re=a(59482),ne=a(72907),ie=a(44887),oe=a(83209);const se=({metadata:e,backgroundColor:t,isPlaying:a,isOnline:r,togglePlay:i})=>{const{uri:o,name:s,images:c,totalLength:A,owner:E}=e,u=(0,l.useMemo)((()=>({id:E.username,uri:E.uri,name:E.username,displayName:E.displayName||void 0,images:E.images||[]})),[E]);return l.createElement(le.gF,{backgroundColor:t},l.createElement(re.W,null,l.createElement(y.$,{size:p.qE.sm,onClick:()=>i(),isPlaying:a,uri:o,disabled:!r,ariaPlayLabel:n.ag.get("playlist.a11y.play",s),ariaPauseLabel:n.ag.get("playlist.a11y.pause",s)}),l.createElement(ne.i,{text:s})),l.createElement(le.Oz,{images:c,name:s,shape:ie.K.ROUNDED_CORNERS,renderImage:()=>l.createElement(oe.$,null)}),l.createElement(le.sP,null,l.createElement(le.dy,{small:!0,uppercase:!0},n.ag.get("playlist")),l.createElement(le.xd,{canEdit:!1,onClick:()=>{}},s),l.createElement(le.QS,{creators:[u],totalEpisodes:A})))},ce=({metadata:e,canSort:t})=>{const a=(0,d.Y5)("#006450"),o=(0,u.k)(),{sortState:E}=(0,l.useContext)(A.Q),{filter:m}=(0,l.useContext)(c.fo),{isPlaying:D,togglePlay:y,usePlayContextItem:L}=(0,g.n)({uri:e.uri,metadata:{[C.sb.SORTING_CRITERIA]:O(E),[C.sb.FILTERING_PREDICATE]:(0,s.aK)(m)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});return l.createElement("section",{className:R.Z.yourEpisodes,"data-testid":"your-episodes-page"},l.createElement(T.$,null,n.ag.get("sidebar.your_episodes")),l.createElement(se,{metadata:e,backgroundColor:a,isPlaying:D,isOnline:o,togglePlay:y}),l.createElement("div",{className:R.Z.yourEpisodesContentWrapper},l.createElement(I,{metadata:e,backgroundColor:a,isPlaying:D,isOnline:o,togglePlay:y,canSort:t}),l.createElement("div",{className:"contentSpacing"},e.totalLength>0?l.createElement(ae,{contextUri:e.uri,usePlayContextItem:L}):l.createElement(i.u,{message:n.ag.get("collection.empty-page.episodes-subtitle"),title:n.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:n.ag.get("collection.empty-page.shows-cta"),renderInline:!0},l.createElement(r.G,null)))))},Ae=l.memo((function(){const e=(0,l.useContext)(m.H).getCapabilities(),t=(0,D.x)();return t?l.createElement(A.$,{uri:t.uri,defaultSortOption:E.oT.ADDED_AT},l.createElement(c.hz,{uri:t.uri},l.createElement(ce,{metadata:t,canSort:e.canSort&&t.totalLength>0}))):l.createElement(o.h,{hasError:!1,errorMessage:n.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map