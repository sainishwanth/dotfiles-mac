"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8396],{88396:(e,s,o)=>{o.r(s),o.d(s,{EPISODE_SPONSORS_SHELF_TESTID:()=>v,EpisodeSponsorsWrapper:()=>y,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>D,default:()=>h});var n=o(67154),i=o.n(n),r=o(67294),t=o(1486),a=o(8271);const d=(0,r.lazy)((()=>Promise.all([o.e(1814),o.e(7258)]).then(o.bind(o,87258))));function p({fetchedEpisodeSponsorsData:e,fireTrackingEvent:s,numberOfSponsorsToDisplay:o,firedViewedEvents:n,version:p,reason:u,uri:c}){const{displayedEpisodeSponsorsData:f}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:s}){return(0,r.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,s)})),[e,s])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:o}),l=(0,a.s4)(),S=(0,r.useMemo)((()=>f.map(((e,o)=>r.createElement(d,i()({key:`${e.metadata.lineitem_id}-${o}`,fireTrackingEvent:s,firedViewedEvents:n,version:p,onClick:async function(){return l.send((0,t.$)({uri:c,reason:u,lineitem_id:f.map((e=>e.metadata.lineitemId)),ui_navigate:f.map((({clickthrough:e},s)=>o===s?e:"")),navigate_to_external_uri:f.map(((e,s)=>o===s))}))}},e))))),[f,s,n,p,u,c,l]);return{displayedEpisodeSponsorsData:f,displayedSponsors:S}}var u=o(69518),c=o.n(u);var f=o(52883);var l=o(18693);function S({firedViewedEvents:e}){const s=(0,r.useRef)();return{firedViewedEvents:s.current=e??s.current??new Set}}function E({uri:e,getEpisodeSponsors:s,fireTrackingEvent:o,numberOfSponsorsToDisplay:n,version:i,reason:t}){const{state:a}=(0,f.TH)(),{episodeBase62Id:d}=function({uri:e,episodeBase62Id:s}){return{episodeBase62Id:(0,r.useMemo)((()=>s||c().from(e)?.getBase62Id()),[e,s])}}({...a,uri:e}),{fetchedEpisodeSponsorsData:u}=(0,l.m)({...a,episodeBase62Id:d,getEpisodeSponsors:s,version:i}),{firedViewedEvents:E}=S({...a});return{uri:e,episodeBase62Id:d,fetchedEpisodeSponsorsData:u,...p({fetchedEpisodeSponsorsData:u,fireTrackingEvent:o,numberOfSponsorsToDisplay:n,firedViewedEvents:E,version:i,reason:t,uri:e}),firedViewedEvents:E,reason:t}}const m=(0,r.lazy)((()=>o.e(7479).then(o.bind(o,27479)))),v="episode-sponsors-shelf",D="see-all-episode-sponsors";function y(e){const{numberOfSponsorsToDisplay:s}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),o=E({...e,numberOfSponsorsToDisplay:s});return o.episodeBase62Id&&o.displayedSponsors.length?r.createElement(r.Suspense,{fallback:!0},r.createElement(m,i()({},e,{numberOfSponsorsToDisplay:s,state:o}))):null}const h=y},18693:(e,s,o)=>{o.d(s,{F:()=>t,m:()=>a});var n=o(67294),i=o(64005),r=o(31604);const t=420;function a({episodeBase62Id:e,getEpisodeSponsors:s,fetchedEpisodeSponsorsData:a=[],version:d}){const[p,u]=(0,n.useState)(a),c=(0,n.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const n=s??(await Promise.resolve().then(o.bind(o,11401))).getEpisodeSponsors;u(await n(e,{version:d}))}catch(e){u([])}}),[e,s,d]),f=(0,i.y)(c,t);return(0,n.useEffect)((function(){a.length||f()}),[f,a.length]),(0,r.H)(f),{fetchedEpisodeSponsorsData:p}}},31604:(e,s,o)=>{o.d(s,{H:()=>p});var n=o(67294),i=o(87577),r=o(49207),t=o(40080),a=o(8341),d=o(89952);function p(e){const s=(0,i.W6)(r.oF),o=(0,a.Y)((e=>{const s=e?.item??void 0;return(0,d.k6)(s)&&s.isPodcastAd?s.id??void 0:void 0})),p=(0,t.D)(o);(0,n.useEffect)((function(){o!==p&&Boolean(o)&&setTimeout(e,s)}),[e,o,p,s])}}}]);
//# sourceMappingURL=8396.js.map