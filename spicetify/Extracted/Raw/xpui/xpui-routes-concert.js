"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7288],{61527:(e,t,s)=>{s.d(t,{Z:()=>N});var n=s(59496),a=s(46810),r=s(14950),i=s(89396),c=s(20567),o=s(94386),l=s(94686),d=s(41799);const h="MUiWCNTfb6FcSwVPvQ1V",m="UAk3bMhekwJTV_wIyfsT",g="X9w6LPfKsZHMCs38sVIQ",u="NXn5KjeUOjLGlAfS1Gao",x="N0wgFMDDvCiby4QB5kLJ",p="nloNe2BLRHjz9dxlwfLU",j="JzXND83mXvcEuntCNR34",v="GR08E4L_rOGljyQQX30R";var y=s(4637);const N=(0,n.memo)((e=>{const{concert:t,isVirtual:s,onClick:n}=e,{venue:N,location:f}=t,k=t.artists[0],b=(0,l.CH)(t.startDate.localDate);return(0,y.jsxs)(i.Link,{to:`/concert/${t.id}`,className:h,onClick:n,children:[k.imageUri&&(0,y.jsx)(c.Z,{children:(0,y.jsx)("div",{role:"img",className:v,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${k.imageUri})`}})}),(0,y.jsx)("time",{className:m,dateTime:t.startDate.localDate,children:(0,y.jsx)(a.D,{as:"h5",variant:"mestoBold",children:(0,l.jx)(b)})}),(0,y.jsxs)("div",{className:g,dir:"auto",children:[(0,y.jsxs)(a.D,{as:"h2",className:j,variant:"mesto",children:[(0,o.FO)(b)," • ",(0,l.hK)(b)]}),(0,y.jsx)(a.D,{as:"h2",variant:"cello",weight:"bold",className:u,children:(0,d.ij)(t)}),(0,y.jsx)("div",{className:x,children:(0,y.jsx)(a.D,{as:"h2",className:p,variant:"mesto","data-testid":"location-name",children:s?N:[N,f].join(r.ag.getSeparator())})})]})]})}))},75355:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Oe});var n=s(9102),a=s(61740),r=s(92053),i=s(14950),c=s(58309),o=s(81607),l=s(85980);const d=e=>{const[t,{username:s,concertUri:n}]=e.queryKey;return(async(e,t)=>{const s=await(0,l.checkConcertInCollection)(o.b.getInstance(),e,t);return s.body?.found[0]})(s,n)};var h=s(470),m=s(59496),g=s(46810),u=s(15066),x=s(53335),p=s(97126),j=s(54353),v=s(81555),y=s(80206),N=s(30283),f=s(36607),k=s(69544),b=s(84875),C=s.n(b),w=s(90815),D=s(68699),_=s(94741),I=s(6948),S=s(75667),P=s(89846),L=s(74599),U=s(42940),A=s(88905),T=s(89242),K=s(4637);const E=m.memo((function({uri:e}){const{spec:t}=(0,U.T)(e);return(0,K.jsx)(L.ZP,{value:"concert",children:(0,K.jsxs)(P.v,{children:[(0,K.jsxs)(A.q,{children:[(0,K.jsx)(T.Jx,{spec:t,uri:e,displayText:i.ag.get("context-menu.copy-concert-link")}),(0,K.jsx)(T.W2,{spec:t,uri:e})]}),(0,K.jsx)(T.h$,{spec:t,uri:e})]})})}));var F=s(89396),M=s(73471),H=s(28776),V=s(91829),O=s(51418),R=s(49340),$=s(73139),z=s(6339);const W="rvw6x7R5AiAT48dSkFl9",Y="JRuVlk6wpKk6ok7zuW6l",Q="YpfopxY2udneDY34uzRN",Z="KI_0F1jtTR5tWgl7gZ1E",q="gKtc3TdowDTXBaVESi1D",G="V8TIr8yJq4tYZfPEzm12",J="VvL91cIRcCi1hJh0K845",X="vKcnOO1GNYoLKHg4T4lK",B="LdW0YNvo_Y77hgqhL4zY",ee="cTkykhjfHxkEGKbxSxXw",te="XgeTnLs82tTjczDR6oKn",se="P3fE7wn6Tqnibn3gljKV",ne="A8LG_5Dvp7IiXDtdR571",ae="OVY7plwgy_AKAzhgoCAF",re="O0PSSw8ttrMn9lzq_L16",ie="D_ffrfn62aOgZKOFfZVr",ce="OH4mOZCual2ejIodzIkL",oe="se_ixDV6hBf7lve861oU",le="YDAJHPP5lDmg71SdvJZC",de="lKQxSRsi8KcoYx5D7mjh",he="LUMel_X4gQK0J1i6X0sC",me="s1jEHgfOLzeY3WugmaoT",ge=(0,m.memo)((e=>{const{concertUri:t,position:s,ticketer:n,spec:a}=e,r=(0,k.$P)(),i=(0,R.o)(),c=(0,m.useMemo)((()=>a.ticketProviderCellFactory({identifier:n.partnerDisplayName,position:s,uri:n.url})),[a,n.partnerDisplayName,s,n.url]),o=(0,k.Wi)(c);return(0,K.jsxs)(F.default,{to:n.url,className:te,onClick:()=>{const e=c.hitNavigateToExternalUri({destination:n.url});r.logInteraction(e),i({targetUri:t,intent:"find-concert",type:"click"})},ref:o,children:[(0,K.jsx)("div",{className:se,children:(0,K.jsx)(z.Ee,{loading:"eager",srcSet:n.imageURL,src:n.imageURL,height:"100%",width:"100%",children:(0,K.jsx)(O.i,{className:ne,iconSize:24})})}),(0,K.jsxs)("div",{className:re,children:[(0,K.jsx)(g.D.span,{children:n.partnerDisplayName}),(0,K.jsx)($.h,{className:ae,iconSize:24})]})]},n.url)}));var ue=s(94686);const xe=(0,m.memo)((e=>{const{concert:t,onClick:s}=e,{category:n,venue:a,location:r,lat:i,lon:c}=t;if("ONLINE"===n)return(0,K.jsx)(g.D,{as:"h3",variant:"canon",children:a});const o=new URL("https://maps.google.com/");return o.searchParams.set("q",`${a},${r}`),o.searchParams.set("ll",`${i},${c}`),(0,K.jsx)(F.default,{to:o.href,target:"_blank",onClick:()=>s(o.href),children:(0,K.jsxs)(g.D,{as:"h3",variant:"canon",children:[a,", ",r]})})})),pe=(0,m.memo)((e=>{const{concert:t,ticketAvailabilityTranslated:s,entitySpec:n,isConcertSaved:a,isAnonymous:r,onInterestedClick:c}=e,d=(0,m.useMemo)((()=>n.ticketProviderListFactory()),[n]),h=(0,k.$P)(),u=(0,k.Wi)(d),x=(0,m.useMemo)((()=>n.interestedButtonFactory()),[n]),p=(0,k.Wi)(x),j=(0,ue.CH)(t.date),v=`spotify:concert:${t.id}`,[y,N]=(0,m.useState)(a),f=(0,I.W6)(M.tp);if(0===t.ticketers.length)return null;if((0,ue.OF)(t.date))return(0,K.jsxs)("div",{className:B,children:[(0,K.jsx)(g.D,{as:"h3",variant:"canon",children:i.ag.get("concert_event_ended")}),(0,K.jsx)(g.D,{variant:"ballad",children:(0,K.jsx)(F.default,{to:"spotify:concerts",children:i.ag.get("concert_past_message")})})]});return(0,K.jsxs)("div",{className:B,ref:u,children:[(0,K.jsx)(g.D,{as:"h3",variant:"canon",children:(0,K.jsx)(xe,{concert:t,onClick:e=>{const t=n.venueMapLinkFactory().hitNavigateToExternalUri({destination:e});h.logInteraction(t)}})}),(0,K.jsxs)(g.D,{as:"h3",variant:"mesto",className:le,children:[(0,ue.xE)(j)," • ",(0,ue.hK)(j)]}),(0,K.jsx)(g.D,{as:"h3",className:X,variant:"mesto",children:(b=t.ticketers,0===b.length?null:1===b.length?i.ag.get("concert.header.tickets_from_1",b[0].partnerDisplayName):2===b.length?i.ag.get("concert.header.tickets_from_2",b[0].partnerDisplayName,b[1].partnerDisplayName):3===b.length?i.ag.get("concert.header.tickets_from_3",b[0].partnerDisplayName,b[1].partnerDisplayName,b[2].partnerDisplayName):i.ag.get("concert.header.tickets_from_4",b[0].partnerDisplayName,b[1].partnerDisplayName,b[2].partnerDisplayName,b.length-3))}),s&&(0,K.jsx)(g.D,{as:"h3",className:X,variant:"mesto",children:s}),(0,K.jsxs)("div",{className:Y,children:[!r&&f&&(0,K.jsx)(H._,{label:i.ag.get("concerts_interested_tooltip"),placement:"top-end",children:(0,K.jsx)(w.P,{buttonSize:"sm",iconLeading:y?D.N:_.S,className:C()(he,{[W]:y}),onClick:()=>{const e=x.hitUiElementToggle();h.logInteraction(e),y?((0,l.unsaveConcert)(o.b.getInstance(),t.id),c(!0,i.ag.get("concerts_removed-from-your-saved-events")),h.logInteraction(x.hitRemoveInterest())):((0,l.saveConcert)(o.b.getInstance(),t.id),c(!0,i.ag.get("concerts_added-to-your-saved-events")),h.logInteraction(x.hitAddInterest())),N(!y)},ref:p,children:i.ag.get("concerts_interested")})}),(0,K.jsx)(V.yj,{menu:(0,K.jsx)(E,{uri:v}),onShow:()=>{const e=n.contextMenuButtonFactory().hitUiReveal();h.logInteraction(e)},children:(0,K.jsx)(S.z,{size:32})})]}),(0,K.jsx)(g.D.h3,{variant:"canon",children:i.ag.get("concert.header.available_tickets_from")}),(0,K.jsx)("div",{className:ee,children:t.ticketers.map(((e,t)=>(0,K.jsx)(ge,{concertUri:v,ticketer:e,position:t,spec:d},t)))})]});var b}));var je=s(45778),ve=s(3831),ye=s(49966),Ne=s(20567);const fe="bnxKFmECExdcmyBXx9f_",ke="UrPgHWUndGwAWPfONuwd",be="pF2W693VDIpPdVTVCsDg",Ce="YGVuy3Qzaam0CJPc_s4K",we="r5Kj2xQVLHK0hf_J00US",De="qCN2f5PHVrzAPLvQ0lNc",_e=(0,m.memo)((e=>{const{entity:t,headliner:s,onClick:n}=e,{imageUri:a,name:r,uri:c}=t;return(0,K.jsxs)(F.Link,{to:c,className:fe,onClick:n,children:[a?(0,K.jsx)(Ne.Z,{children:(0,K.jsx)("div",{"data-testid":"image-container",className:De,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.5) 50.52%, rgba(18, 18, 18, 0.7) 100%), url(${a})`}})}):null,(0,K.jsxs)("div",{className:ke,children:[s&&(0,K.jsx)("div",{className:Ce,children:(0,K.jsx)(g.D,{as:"h4",variant:"mestoBold",className:we,weight:"bold",children:i.ag.get("concert.label.headliner")})}),(0,K.jsx)(g.D,{as:"h2",variant:"alto",className:be,children:r})]})]})})),Ie=_e,Se=(0,m.memo)((e=>{const{artist:t,albums:s,position:n,lineupArtistsSpec:a}=e,r=(0,m.useMemo)((()=>a.artistRowFactory({position:n,uri:t.uri})),[a,n,t.uri]),c=(0,k.$P)(),o=0===n,l=`${(0,ye.GJ)(t.id)}:discography`;return(0,K.jsx)(L.ZP,{value:"headered-grid",index:n,children:(0,K.jsx)(k.Nh,{spec:r||null,children:(0,K.jsx)(ve.P,{title:o?i.ag.get("concert_lineup"):"",total:s.length+2,seeAllUri:l,seeAllLabel:i.ag.get("artist-page.show-discography"),onClickShelfSeeAll:()=>{const e=r.seeDiscographyLinkFactory().hitUiNavigate({destination:l});c.logInteraction(e)},children:[(0,K.jsx)(Ie,{entity:t,headliner:o,onClick:()=>{const e=r.artistCardFactory().hitUiNavigate({destination:t.uri});c.logInteraction(e)}},`ConcertArtistCard-${t.id}`),null,...s.map(((e,s)=>(0,K.jsx)(je.r,{index:s,artists:[{uri:t.uri,name:t.name}],images:[{url:e.imageUri,width:100,height:100}],name:e.name,uri:e.uri,sharingInfo:null},e.uri)))]})})},t.uri)})),Pe=(0,m.memo)((e=>{const{albums:t,artists:s,entitySpec:n}=e,a=(0,m.useMemo)((()=>n.lineupArtistsFactory()),[n]),r=(0,k.Wi)(a),i=(0,m.useMemo)((()=>{const e={};return t.forEach((t=>{const s=t.artistName;e[s]?e[s].push(t):e[s]=[t]})),e}),[t]);return(0,K.jsx)("div",{className:ie,ref:r,"data-testid":"concert-lineup",children:s.map(((e,t)=>(0,K.jsx)(Se,{artist:e,albums:i[e.name]||[],position:t,lineupArtistsSpec:a},e.uri)))})})),Le="y4xsX4QR_wfM40vOhsQ4",Ue="TPdGbM0PhSqxmhkxP9n2",Ae="y33j8HV43EGq3BPkZrLA",Te=(0,m.memo)((e=>(0,K.jsxs)(F.Link,{to:"spotify:concerts",className:Le,onClick:e.onClick,children:[(0,K.jsx)(Ne.Z,{children:(0,K.jsx)("div",{className:Ae,style:{backgroundImage:"linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(18, 18, 18, 0.5) 50.52%, rgba(18, 18, 18, 0.7) 100%), url(https://concerts.spotifycdn.com/ConcertHubCard.png)"}})}),(0,K.jsx)("div",{className:Ue,children:(0,K.jsx)(g.D,{as:"h2",variant:"canon",children:i.ag.get("concerts_browse_more")})})]})));var Ke=s(61527);const Ee=(0,m.memo)((e=>{const t=(0,m.useMemo)((()=>e.entitySpec.recommendedConcertsFactory()),[e.entitySpec]),s=(0,k.$P)(),n=(0,k.Wi)(t),a=e.upcomingConcerts;if(!a||a.length<1)return null;const r=a.map(((e,n)=>{const a=`spotify:concert:${e.concert.id}`;return(0,K.jsx)(Ke.Z,{concert:e.concert,onClick:()=>{const e=t.concertCardFactory({position:n,uri:a}).hitUiNavigate({destination:a});s.logInteraction(e)}},e.concert.id)}));return(0,K.jsx)("div",{className:oe,ref:n,"data-testid":"concert-recommendations",children:(0,K.jsx)(L.ZP,{value:"headered-grid",children:(0,K.jsxs)(ve.P,{title:i.ag.get("concerts_more_events"),total:a.length+1,className:de,showSeeAll:!0,seeAllUri:"spotify:concerts",seeAllLabel:i.ag.get("view.see-all"),children:[(0,K.jsx)(Te,{onClick:()=>{const e=t.browseCardFactory().hitUiNavigate({destination:"spotify:concerts"});s.logInteraction(e)}}),r]})})})}));var Fe=s(41799);const Me=(0,m.memo)((e=>{const{data:t,isAnonymous:s,isConcertSaved:n}=e,{artists:a,albums:r,upcomingConcerts:i}=t,c=t.concert.concert,[o,l]=(0,m.useState)(!1),[d,h]=(0,m.useState)(""),{spec:b}=(0,k.fU)(x.q,{data:{identifier:c.id,uri:`spotify:concert:${c.id}`}});return(0,f.Y)(t.color),(0,K.jsxs)("section",{className:G,children:[(0,K.jsx)(j.$,{children:(0,Fe.Yl)(c)}),(0,K.jsxs)(v.gF,{backgroundImages:[{url:t.headerImageUri,width:100,height:100}],backgroundColor:t.color,children:[(0,K.jsxs)(v.sP,{children:[(0,K.jsx)(v.T0,{children:(0,K.jsx)("div",{className:Q,children:(0,K.jsx)(g.D,{as:"h3",variant:"canon",className:Z,children:(0,ue.jx)((0,ue.CH)(c.date))})})}),(0,K.jsx)(v.xd,{children:(0,Fe.Yl)(c)})]}),(0,K.jsx)(y.W,{children:(0,K.jsx)("div",{className:ce,children:(0,K.jsx)(N.i,{text:(0,Fe.Yl)(c)})})})]}),(0,K.jsxs)("div",{className:q,children:[(0,K.jsx)(p.I,{backgroundColor:t.color}),(0,K.jsxs)("div",{className:J,children:[(0,K.jsx)(pe,{onInterestedClick:(e,t)=>{l(e),h(t),setTimeout((()=>l(!1)),1e4)},concert:c,ticketAvailabilityTranslated:t.ticketAvailabilityTranslated,entitySpec:b,isAnonymous:s,isConcertSaved:n}),(0,K.jsx)(Pe,{artists:a,albums:r,entitySpec:b}),(0,K.jsx)(Ee,{upcomingConcerts:i,entitySpec:b})]})]}),o&&(0,K.jsx)(u.A9,{colorSet:"invertedLight",className:me,children:d})]})}));var He=s(79750);const Ve=async e=>{const[t,s]=e.queryKey;return(await(0,l.getConcert)(o.b.getInstance(),s)).body},Oe=()=>{const{concertId:e=""}=(0,r.UO)(),{data:t,isLoading:s}=(0,n.useQuery)(["concert",e],Ve,{staleTime:6e5}),o=(e=>{const t=["concertInCollection",e];return(0,n.useQuery)(t,d,{keepPreviousData:!1,retry:!1})})({username:(0,a.v9)(h.n5),concertUri:`spotify:concert:${e}`}),l=o?.data||!1,{isAnonymous:m}=(0,a.v9)(h.Gg),g=t?.artists.map((e=>e.uri));var u;return u={artists:g},(0,n.useQuery)(["family-duo-concert-followers",u],He.g,{enabled:(0,I.W6)(M.hj)}),s?(0,K.jsx)(c.h,{hasError:!1,errorMessage:""}):t?(0,K.jsx)(Me,{data:t,isAnonymous:m,isConcertSaved:l}):(0,K.jsx)(c.h,{hasError:!0,errorMessage:i.ag.get("concert.error.concert_not_found_title")})}},79750:(e,t,s)=>{s.d(t,{g:()=>i,P:()=>r});var n=s(81607),a=s(11715);const r=async e=>{const[t,{geonameId:s}]=e.queryKey,r=await((e,t)=>e.build().withMethod("GET").withHost(a.gH).withPath("/concerts/").withEndpointIdentifier("/cooper/concerts").withQueryParameters({...t&&{geonameId:t}}).withoutMarket().send())(n.b.getInstance(),s);return r.body},i=async e=>{const[t,{artists:s}]=e.queryKey,r=await((e,t)=>e.build().withMethod("POST").withHost(a.gH).withPath("/followers/").withEndpointIdentifier("/cooper/followers").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({artists:t})).withoutMarket().send())(n.b.getInstance(),s);return r.body}}}]);
//# sourceMappingURL=xpui-routes-concert.js.map