"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{95289:(e,t,a)=>{a.d(t,{A:()=>b});var n=a(67294),r=a(94184),l=a.n(r),o=a(28760),i=a(62312),s=a(41374),c=a(20246),m=a(58238),u=a(91883),d=a(30005),g=a(36652),E=a(21691),y=a(28248);const p=({heading:e,selected:t,onSelect:a,options:r,sortOrder:l})=>{let i;return l&&(l===y.kn.ASC||l===y.kn.SECONDARY_ASC?i=n.createElement(m.C,{iconSize:16}):l!==y.kn.DESC&&l!==y.kn.SECONDARY_DESC||(i=n.createElement(u.B,{iconSize:16}))),n.createElement(d.v,null,e?n.createElement(g.F,null,e):null,r.map((({key:e,value:r})=>n.createElement(E.s,{role:"menuitemradio","aria-checked":e===t.key&&!i,key:e,onClick:()=>a(e),icon:e===t.key&&i},n.createElement(o.Dy,{variant:"mesto"},r)))))},k="w6j_vX6SF5IxSXrrkYw5",f="CbHJjxYxldG7uUPMYMaP";const b=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:m,sortOrder:u,variant:d="mesto",semanticColor:g,disabled:E,onClick:y})=>{const[b]=t;a||(a=b);const h=m?m(a):a!==b;return n.createElement(c.y,{menu:n.createElement(p,{selected:a,options:t,onSelect:r,sortOrder:u,heading:e})},((e,t,r)=>n.createElement("button",{className:l()(k,{[f]:h}),onClick:e=>{E||(y?.(e),t(e))},ref:r,type:"button"},n.createElement(o.Dy,{semanticColor:g,variant:d},a.value),e?n.createElement(i.U,{iconSize:16}):n.createElement(s.i,{iconSize:16}))))}},47917:(e,t,a)=>{a.d(t,{V:()=>D,e:()=>I});var n=a(67294),r=a(46458),l=a(69518),o=a.n(l),i=a(33702),s=a(84629),c=a(43914),m=a(25988),u=a(68556),d=a(95806),g=a(99191),E=a(56802),y=a(38894),p=a(80219),k=a(18261),f=a(62975),b=a(87257),h=a(57978),v=a(75016),C=a(42922),S=a(18864),P=a(52759),w=a(54444),N=a(7073),A=a(84788);function I(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const x=e=>`activation-trigger-mme-${e}`,D=n.memo((function({index:e,showMetadata:t,episode:a,usePlayContextItem:l}){const D=(0,r.oR)().getState().platform?.isBrowser,R=a.playedState.playPositionMilliseconds,U=a.uri,M=(0,n.useRef)(null),[z,B]=(0,n.useState)(a.playedState.state===N.sY.Completed),L=(0,g.O1)(),O=(0,y.g)(),T=(0,S.jh)(),F=(0,E.o)(),_=(0,r.I0)(),{UBIFragment:G,spec:X,logger:W}=(0,w.fU)(i.createDesktopEpisodeBlockEventFactory,{data:{uri:U,reason:a.requestId||"",position:e}}),Y=(0,w.Wi)(X),{isActive:j,isPlaying:H,togglePlay:Z}=l({uri:U}),[q]=(0,P.z)(1e4,(e=>e?.item?.uri===U));(0,n.useEffect)((()=>{H&&(M.current=q)}),[H,q]),(0,n.useEffect)((()=>{!H&&M.current&&a.duration.milliseconds<=M.current&&B(!0)}),[H,a.duration.milliseconds]);const V=(0,n.useCallback)((e=>{e||(M.current=0),B(e)}),[]),K=I(t),J=(0,p.s)({...a,coverArt:{sources:a.coverArt}},K),$=(0,n.useCallback)((()=>{if(a.episodeType===N.Wf.Episode&&D)f.y.set((()=>({triggerId:x(a.uri),triggerAction:null})));else if(O)J();else{let e;e=H?X.playButtonFactory().hitPause({itemToBePaused:U}):j?X.playButtonFactory().hitResume({itemToBeResumed:U}):X.playButtonFactory().hitPlay({itemToBePlayed:U});const t=W.logInteraction(e);F({targetUri:U,intent:H?"pause":"play",type:"click"}),Z({loggingParams:t})}}),[j,J,F,Z,U,H,O,a,D,W,X]),Q=(0,n.useCallback)((()=>{W.logInteraction(X.hitUiNavigate({destination:U})),F({type:"click",targetUri:U,intent:"navigate"})}),[U,F,W,X]),ee=a.podcastSubscription?.isPaywalled??!1,te=a.podcastSubscription?.isUserSubscribed??!1,ae=ee&&!te,ne=ee&&O,{badges:re}=(0,A.r)({contentRating:a.contentRating?.label,isPaywalled:ee}),le=(0,n.useCallback)((()=>_((0,s.RM)(t.uri))),[t.uri,_]),oe=(0,n.useCallback)((e=>{let r=e;return(ae||ne)&&(r=n.createElement(d.l,{enabled:!0,showUri:t.uri},r)),!a.playability.playable&&re.nineteen&&(r=n.createElement("div",{onClick:e=>{e.stopPropagation(),le()}},e)),r=n.createElement(c.D,{id:x(U),targetURI:o().from(U)},r),r}),[U,ae,ne,t.uri,re.nineteen,a.playability.playable,le]);return n.createElement(G,{spec:X},n.createElement(C.ZP,{value:"row",index:e},n.createElement(k._,{onShow:()=>{W.logInteraction(X.secondaryHitUiReveal())},menu:n.createElement(m.k,{uri:U,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:z,onMarkAsPlayed:V})},n.createElement(u.X,{ref:Y,requestId:a.requestId,index:e,uri:U,size:T,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||ae,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:M.current??R,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} â€¢ ${t.name}`;L(e,[U],n,t.uri)},handlePlaybackClick:$,handleClick:Q,isCurrentlyPlaying:j,isPaywalled:ee,isUserSubscribed:te,isPlaying:H,position:H?q:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:V,contentInformation:a.contentInformation,badges:n.createElement(n.Fragment,null,re.explicit&&n.createElement(b.N,null),re.paid&&n.createElement(v.g,null),re.nineteen&&n.createElement(h.X,{size:16})),playButtonWrapper:oe,onMoreButtonClick:()=>{W.logInteraction(X.moreButtonFactory().hitUiReveal())}}))))}))},16044:(e,t,a)=>{a.r(t),a.d(t,{default:()=>na});var n=a(67294),r=a(52883),l=a(87577),o=a(20657),i=a(70369),s=a(1663),c=a(28760),m=a(73012),u=a(728),d=a(56802),g=a(25678),E=a(49961),y=a(85105);const p="GPPWAsVio35hH080drEK",k="f8FyVnjsXfG9VtTzk9Df",f="tpOdce3HYBF6ASz4MXdr",b="p9AillvR7MCZkOrv3U3h",h="zMqHdOQtjEEbcMV7YHe9",v="zPJ5qeQhpgUvKpAAlNpA",C="n3G4Y43jgF6wXOuj0X44",S=n.memo((function({coverArt:e,showAccessInfo:t,isOpen:a,toggleModal:l,backgroundColor:o}){const i=(0,r.k6)(),s=(0,d.o)();if((0,n.useEffect)((()=>{s({type:"view",intent:"audiobook-gated-entry-point"})}),[s]),!t||!t.partnerLink)return null;const{partnerLink:{title:m,body:S,soaPartners:P}}=t,w=(0,E.X)(e,{desiredSize:640}),N={"--bg-color":o};return n.createElement(y.Z,{contentLabel:"activation-modal",isOpen:a,onRequestClose:l},n.createElement("div",{className:p,style:{...N}},n.createElement(g.Ee,{loading:"lazy",src:w?.url,className:k}),n.createElement("div",{className:f},n.createElement(c.Dy,{as:"p",variant:"canon",className:b},m),n.createElement(c.Dy,{as:"p",className:h},S),P&&P?.map((e=>n.createElement("a",{href:e.linkUrl,className:v,key:e.linkUrl,onClick:()=>{s({type:"click",intent:"navigate-to-access-provider",itemIdSuffix:e.displayName}),l(),i.replace("?isUnlockingAudiobook=true")}},n.createElement("img",{src:e.logoUrl||"",alt:"",width:"24px"}),n.createElement("span",{className:C},n.createElement(c.Dy,{variant:"ballad"},e.displayName," ")),n.createElement(u.V,{iconSize:16})))))))}));var P=a(95661),w=a(22345),N=a(20246),A=a(44887),I=a(7469),x=a(42781);const D={container:"SpVoh9vvBN0kIwzfCiBh",isActive:"nsGHaEmn310z9W4RMbb8",title:"PfYVlZzroXSurDmS_kxY",main:"kCT99_BcJQtW47mEfVF6",titleContainer:"gmDgEbPyRXNixmjYAT9f",duration:"itbbweiDUhLIrwEjSRWv",trailerContainer:"XlZGcb86bItwlMPQ2jOf",image:"VGTtqfOlX2jIbpff6mPP",imageContainer:"aexqooSgfdW95poEaxjH",playButton:"Fui2wGupk4F1Khigbrhj",entityImageLarge:"jWcvSz47NFpbLjnkFT1O",entityImageSmall:"Oo6MP8F01W5uGlnw8dag"};var R=a(55911),U=a(94184),M=a.n(U),z=a(33985),B=a(87257),L=a(57978),O=a(95775),T=a(84788),F=a(85592);let _;!function(e){e.SMALL="small",e.LARGE="large"}(_||(_={}));const G=({images:e,title:t,contentRating:a,duration:r,moreButton:l,onClick:o,onContextMenu:i,onTouchStart:s,onTouchEnd:m,isPlaying:u,isActive:d,size:g,className:E,label:y})=>{const p=g===_.LARGE?"md":"sm",{badges:k}=(0,T.r)({contentRating:a});return n.createElement("div",{"data-testid":"trailer-component",className:M()(D.container,E,{[D.isActive]:d}),onContextMenu:i,onTouchStart:s,onTouchEnd:m},n.createElement("div",{className:D.main},n.createElement("div",{className:D.imageContainer},n.createElement(A.O,{type:x.p.EPISODE,title:t,className:M()(D.image,{[D.entityImageSmall]:g===_.SMALL,[D.entityImageLarge]:g===_.LARGE}),size:I.m$.SIZE_56,images:e,shape:A.K.ROUNDED_CORNERS}),n.createElement("div",{className:D.playButton},n.createElement(F.fh,{"data-testid":"trailer-play-button",version:R.ul.transparent,size:p,isPlaying:u,onClick:o}))),n.createElement("div",{className:D.metadata},n.createElement("div",{className:D.titleContainer},n.createElement(c.Dy,{dir:"auto",className:D.title,variant:"balladBold"},t)),n.createElement("div",{className:D.trailerContainer},n.createElement(O.V,{text:y}),k.explicit&&n.createElement(B.N,null),k.nineteen&&n.createElement(L.X,null),n.createElement(c.Dy,{dir:"auto",variant:"mesto"},n.createElement(z.nL,{durationMs:r}))))),l)};var X=a(40080),W=a(43620),Y=a(84242),j=a(27999),H=a(42745),Z=a(73305),q=a(20238),V=a(77868),K=a(89116);const J="_yl4tOZxcpoUt28k6B8I",$="lcJflizNrSwDM9yPNk6h",Q="ret7iHkCxcJvsZU14oPY",ee=({rating:e,onClick:t})=>{const a=e?.rating?.rating?V.u:K.G;if(!e)return null;const r=e.averageRating?.showAverage?n.createElement(c.Dy,{variant:"mesto",className:M()(Q)},"(",o.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"):null;return n.createElement("button",{className:M()(J),onClick:t},n.createElement(c.Dy,{dir:"auto",variant:"mestoBold"},e?.averageRating?.showAverage&&e.averageRating?.average?e.averageRating?.average:e?.rating?.rating?e.rating.rating:o.ag.get("web-player.audiobooks.noRating")),n.createElement(a,{iconSize:16,className:M()($)}),r)};var te=a(54444),ae=a(67892);const ne="nLNTsyonBwoRIzAv1AME",re="E4I5I7G2CfW32hLWZaqE",le=({title:e,uri:t,className:a})=>n.createElement(ae.r,{"aria-label":e,className:M()(re,a),to:t},n.createElement(c.Dy,{dir:"auto",variant:"mestoBold"},e));function oe(e){return!!e.uri&&!!e.title}const ie=({topics:e,className:t})=>n.createElement("div",{className:M()(ne,t)},e.filter(oe).map((e=>n.createElement(le,{key:e.uri,title:e.title,uri:e.uri})))),se={sectionTitle:"igKG5CnS4gyhXQWp5GVu",author:"E8g_EyijtSREXL0vMFbL",narrator:"Pc8AKn4KmzHwEw8lPiSb",topics:"yE1clVJOE3LrEuOvUxxq"},ce=({authorName:e,htmlDescription:t,narrators:a,rating:r,uri:l})=>{const{spec:i,logger:s,UBIFragment:m}=(0,te.fU)(H.createMobilePodcastRatingEventFactory,{data:{identifier:Z.W.PODCAST_SHOW_AUDIOBOOK,uri:l}}),u=(0,d.o)(),g=(0,n.useCallback)((()=>{u({intent:"expand-description",type:"click"})}),[u]),E=[{title:"Education",uri:"spotify:genre:educational_podcasts"}],y=E.length>0;return n.createElement(m,{spec:i},n.createElement(c.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:se.sectionTitle},o.ag.get("artist.about")),n.createElement(c.Dy,{as:"p",variant:"ballad",className:se.author},o.ag.get("web-player.audiobooks.author",e)),a.length?n.createElement(c.Dy,{as:"p",variant:"ballad",className:se.narrator},o.ag.get("web-player.audiobooks.narratedByX",a.join(o.ag.getSeparator()))):null,n.createElement(ee,{rating:r,onClick:()=>{const e=i.ratingChipButtonFactory({identifier:l}).hitUiNavigate({destination:`spotify:show:${l}:ratings`});s.logInteraction(e)}}),y&&n.createElement(ie,{topics:E,className:se.topics}),t&&n.createElement(q.o,{maxLines:4,content:t,htmlContent:t,LinkComponent:ae.Z,onExpanded:g,className:se.description}))};var me=a(28137),ue=a(30947),de=a(11414),ge=a(32626),Ee=a(4383),ye=a(98778),pe=a(55120),ke=a(4236);const fe=n.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:r,togglePlay:l,isLocked:i}){const[s,c]=(0,Ee.Z)(t),m=!(0,ke.k)(),u=(0,d.o)(),g=(0,n.useCallback)((()=>{u({targetUri:t,intent:s?"unsave":"save",type:"click"}),c(!s)}),[u,t,s,c]);return n.createElement(ue.o,{backgroundColor:e},n.createElement(ue.F,null,n.createElement(pe.$,{onClick:()=>l(),isPlaying:r,size:R.qE.lg,uri:t,locked:i}),n.createElement(ye.r,{key:"follow-button"},n.createElement(de.H,{isAdded:s,onClick:g,disabled:m,size:de.q.md,isAudiobook:!0})),n.createElement(ge.yj,{menu:n.createElement(me.X,{uri:t})},n.createElement(P.z,{label:o.ag.get("more.label.context",a)}))))}));var be=a(42273),he=a(59482),ve=a(72907);const Ce=n.memo((function({coverArt:e,name:t,authorName:a,uri:r,backgroundColor:l,isPlaying:i,togglePlay:s,isLocked:c}){return n.createElement(be.gF,{backgroundColor:l},n.createElement(he.W,null,n.createElement(pe.$,{size:R.qE.sm,onClick:()=>s(),isPlaying:i,uri:r,locked:c}),n.createElement(ve.i,{text:t,dragUri:r,dragLabel:t})),n.createElement(ge._P,{menu:n.createElement(me.X,{uri:r})},n.createElement(be.Oz,{images:e,name:t,shape:A.K.ROUNDED_CORNERS})),n.createElement(be.sP,null,n.createElement(be.dy,{small:!0,uppercase:!0},o.ag.get("web-player.audiobooks.audiobook")),n.createElement(be.xd,{canEdit:!1,onClick:()=>{}},t),n.createElement(be.QS,{author:a})))}));var Se=a(33241),Pe=a(192);var we=a(86649),Ne=a(60410),Ae=a(69518),Ie=a.n(Ae),xe=a(75016),De=a(26010),Re=a(69010),Ue=a(8341),Me=a(5944),ze=a(92408),Be=a(31610);const Le="BO8KtKFwgSHtMt6PAmuv",Oe="b0Vng72SrQiFroJKXfk2",Te="eWxDd0LanTnTlSl8SOHX",Fe="eAOkseqV13_CAmzuDJpa",_e="fovofKIYdEIURgIYoKm2",Ge="we_1b4qCQBaFPT12eUXp",Xe="NXXFrQO7npgPCRuSKaAA",We="ekkhhuxKVGAzkEmuh9kE",Ye="zd6xqobF255bxHFtCmXy",je=n.memo((function({name:e,duration:t,uri:a,bookUri:l,bookName:i,usePlayContextItem:s,isLocked:m,isPlayable:u,resumePositionMs:g,isFullyPlayed:E,releaseDate:y,toggleActivationModal:p}){const k=(0,r.k6)(),f=Ie().from(a).toURLPath(!0),[b,h]=(0,n.useState)(E),v=(0,n.useRef)(g),{isPlaying:C,togglePlay:S}=s({uri:a}),N=(0,Ue.Y)((e=>{if(e?.item?.uri===a){const t=(0,Me.k)(e)??0;return v.current=t,t}return 0})),{useDownloading:A}=(0,n.useContext)(De.I),{currentAvailability:I}=A(a),x=[Re.V8.YES,Re.V8.DOWNLOADING,Re.V8.WAITING].includes(I),D=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),R=(0,n.useCallback)((e=>{D(e),f&&k.push(f)}),[D,f,k]),U=(0,d.o)(),z=(0,n.useCallback)((e=>{D(e),m?(U({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),p()):S()}),[m,U,D,p,S]),B=(0,n.useCallback)((e=>{e||(v.current=0),h(e)}),[]);return n.createElement(ge._P,{menu:n.createElement(w.r,{uri:a,showUri:l,isPlayed:b,onMarkAsPlayed:B})},n.createElement("div",{className:Fe},n.createElement(ae.r,{to:a,onClick:R,className:Le,tabIndex:-1},n.createElement("hr",{className:Te,"aria-hidden":!0}),n.createElement("div",{className:Oe},n.createElement(c.Dy,{as:"h2",variant:"balladBold",className:Xe,semanticColor:"textBase"},e),n.createElement("div",{className:We},n.createElement(F.fh,{size:"sm",version:F.ul.secondary,onClick:z,isPlaying:C,ariaPlayLabel:o.ag.get("tracklist.a11y.play",e,i),ariaPauseLabel:o.ag.get("tracklist.a11y.pause",e,i),locked:m,disabled:!u&&!m}),m?n.createElement(xe.g,null):null,n.createElement("div",{className:Ye},n.createElement(ze.E,{isPlaying:C,fullyPlayed:b,durationMs:t.milliseconds,releaseDate:y,resumePositionMs:v.current,position:C?N:void 0}))),n.createElement(ge.yj,{menu:n.createElement(w.r,{uri:a,showUri:l,isPlayed:b,onMarkAsPlayed:B})},n.createElement(P.z,{className:_e,size:Be.q.sm,label:o.ag.get("more.label.context",e),onClick:D})),n.createElement(Be.o,{uri:a,bookUri:l,className:M()({[Ge]:!x}),onClick:D,size:Be.q.sm})))))})),He=({bookUri:e,bookName:t,isFinishedUnlockingJourney:a,usePlayContextItem:r,toggleModal:l,setIsLocked:o})=>{const i=function(e,t){const a=(0,Pe.z)();return(0,n.useCallback)((async(n,r)=>a.getBookContents(e,{offset:n,limit:r,doRefreshSubscription:t})),[t,a,e])}(e,a),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),[m,u]=(0,n.useState)([]),d=(0,n.useCallback)((()=>{i&&(s.current||null===c.current||(s.current=!0,i(c.current,50).then((e=>{s.current=!1,c.current=e.nextOffset,e.items.length>0&&u((t=>t.concat(e.items)))}))))}),[i]);return(0,n.useEffect)((()=>{o((0,Ne.g)(m))}),[m,o]),n.createElement("ul",null,n.createElement(Se.C,{onReachBottom:d,triggerOnInitialLoad:!0},m.map((a=>{const{name:o,duration:i,uri:s,playability:{playable:c},playedState:{playPositionMilliseconds:m,state:u},releaseDate:d}=a;return n.createElement(je,{name:o,duration:i,uri:s,bookUri:e,bookName:t,key:s,usePlayContextItem:r,isLocked:(0,Ne.S)(a),isPlayable:c,resumePositionMs:m,isFullyPlayed:u===we.sY.Completed,releaseDate:d?.isoString||"",toggleActivationModal:l})}))))},Ze="mmCZ5VczybT9VqKB5wFU",qe="At_ihDspJfh1yw3Cn2cq",Ve="q9WSh3pBJkL9Zyp8zyS7",Ke="eiC4nh70nb5UHZBYMgNA",Je="uU7tdAyRmWf_U95Daugm",$e=n.memo((function({metadata:e}){const{uri:t,coverArt:a,name:l,htmlDescription:i,authorName:s,sample:u,narrators:g,rating:E}=e,{search:y}=(0,r.TH)(),p=!!new URLSearchParams(y).get("isUnlockingAudiobook"),k=!(!(0,X.D)(p)||p),f=(0,W.Z)(a[0]?.url),[b,h]=(0,n.useState)(!1),v=(0,d.o)(),[C,A]=(0,n.useState)(!1);(0,n.useEffect)((()=>{v({type:"view",intent:"audiobook"})}),[v]);const I=(0,n.useCallback)((()=>{b||v({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-header"}),h(!b)}),[v,b]),x=(0,j.ye)(t),{togglePlay:D,isPlaying:R,usePlayContextItem:U}=(0,Y.n)({uri:t},{featureIdentifier:"audiobook"}),{isActive:M,isPlaying:z,togglePlay:B}=U({uri:u?.uri||""}),L=(0,n.useCallback)((()=>{u?.uri&&(v({targetUri:u.uri,intent:z?"play":"pause",type:"click"}),B())}),[z,v,B,u?.uri]);return n.createElement("section",{className:Ze},n.createElement(Ce,{name:l,authorName:s,uri:t,coverArt:a,backgroundColor:f,togglePlay:C?I:D,isPlaying:R,isLocked:C}),n.createElement(fe,{name:l,backgroundColor:f,uri:t,togglePlay:C?I:D,isPlaying:R,isLocked:C}),n.createElement("div",{className:qe},n.createElement("div",{className:Ke},n.createElement(c.Dy,{as:"h1",variant:"canon",semanticColor:"textBase",paddingBottom:m.o78},o.ag.get("web-player.audiobooks.chapters")),n.createElement(He,{bookUri:t,bookName:l,isFinishedUnlockingJourney:k,usePlayContextItem:U,toggleModal:I,setIsLocked:A})),n.createElement("div",{className:Ve},n.createElement(ce,{uri:t,htmlDescription:i,authorName:s,narrators:g,rating:E}),u&&n.createElement(G,{label:o.ag.get("sample"),className:Je,images:u.coverArt||[],title:u.name,duration:u.duration.milliseconds,moreButton:n.createElement(N.y,{menu:n.createElement(w.r,{uri:u.uri,showUri:t})},n.createElement(P.z,null)),onClick:L,isPlaying:z,isActive:M,size:_.LARGE,contentRating:u.contentRating?.label}))),b&&x&&n.createElement(S,{backgroundColor:f,isOpen:b,toggleModal:I,coverArt:a,showAccessInfo:x}))}));var Qe=a(49207),et=a(49125),tt=a(26382);const at={field:tt.ay.PUBLISH_DATE,order:tt.i5.DESC},nt={field:tt.ay.PUBLISH_DATE,order:tt.i5.ASC},rt={field:tt.ay.LENGTH,order:tt.i5.DESC},lt={field:tt.ay.LENGTH,order:tt.i5.ASC},ot={episodic:at,sequential:nt,recent:at};function it(e){return ot[e]}var st=a(86514),ct=a(14535);const mt=({uri:e,name:t,backgroundColor:a})=>{const r=(0,d.o)(),l=!(0,ke.k)(),[i,s]=(0,Ee.Z)(e),c=(0,n.useCallback)((()=>{r({targetUri:e,intent:i?"unsave":"save",type:"click"}),s(!i)}),[r,e,i,s]);return n.createElement(ue.o,{backgroundColor:a},n.createElement(ue.F,null,n.createElement(ye.r,{key:"follow-button"},n.createElement(ct.e,{isFollowing:i,onClick:c,disabled:l})),n.createElement(N.y,{menu:n.createElement(st.M,{uri:e})},n.createElement(P.z,{label:o.ag.get("more.label.context",t)}))))},ut=(0,n.lazy)((()=>a.e(8381).then(a.bind(a,18381))));function dt(e){return(0,l.W6)(Qe.$f)?n.createElement(n.Suspense,{fallback:!0},n.createElement(ut,e)):null}var gt=a(25988),Et=a(38894),yt=a(80219),pt=a(18261),kt=a(94233),ft=a(89952),bt=a(47917),ht=a(42922),vt=a(18864),Ct=a(22583);const St=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Pt=n.memo((function({uri:e,children:t}){return n.createElement(Ct.r,{uri:e,defaultState:[],sortContext:St,localStorageKey:"showFilterParams-v2"},t)})),wt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:it("recent")}),Nt=n.memo((function({uri:e,children:t,defaultSortParam:a}){return n.createElement(Ct.r,{uri:e,defaultState:a,sortContext:wt,localStorageKey:"showSortParam"},t)})),At="cJJXVm4gQW6AdfCQRhpX",It="hTRqaN61SDG95erQGMmx",xt={totalCount:0,nextOffset:0,items:[]},Dt=n.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,n.useContext)(wt),{sortState:r}=(0,n.useContext)(St),l=(0,j.ZM)(e.uri,a,r),[o,i]=(0,n.useState)(xt),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),{ref:m,breakpoint:u}=(0,vt.Db)({[vt.Uo.MEDIUM]:0,[vt.Uo.LARGE]:600}),d=(0,n.useCallback)(((e=!1)=>{if(!l)return;const t=c.current;null!==t&&(s.current||(s.current=!0,l(t,50).then((a=>{i((n=>{const r=e?[]:[...n.items];return r.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:r}})),s.current=!1}))))}),[l]);return(0,n.useEffect)((()=>{i(xt)}),[e.uri]),(0,n.useEffect)((()=>{c.current=0,d(!0)}),[d]),n.createElement(vt.ZU.Provider,{value:u},n.createElement(ht.ZP,{value:"track-list"},n.createElement("div",{ref:m},n.createElement(Se.C,{onReachBottom:d,triggerOnInitialLoad:!0},o.items.map(((a,r)=>n.createElement("div",{className:It,key:`${r}${a.uri}`},n.createElement("hr",{className:At,"aria-hidden":!0}),n.createElement(bt.V,{key:`${a.uri}/${r}`,index:r,episode:a,showMetadata:e,usePlayContextItem:t}))))))))}));var Rt=a(95289);const Ut={field:tt.YG.ISPLAYED,operator:tt.NK.EQUALS,value:!1},Mt={field:tt.YG.STARTEDPLAYING,operator:tt.NK.GREATER_THAN,value:0};const zt="all-episodes",Bt=()=>{const{sortState:e,setSortState:t}=(0,n.useContext)(St),a=new Map([[Ut,{key:"is-played",value:o.ag.get("shows.filter.unplayed")}],[Mt,{key:"started-playing",value:o.ag.get("shows.filter.in-progress")}]]),r=Array.from(a.values());r.unshift({key:zt,value:o.ag.get("mwp.podcast.all.episodes")});const l=Array.from(a.keys()),i=(0,n.useCallback)((e=>{if(e===zt)t([]);else{const n=l.find((t=>a.get(t)?.key===e));n&&t([n])}}),[t,l,a]);if(!a.size||!l)return null;let s=r[0];const c=Array.from(a.entries()).filter((t=>e?.some((e=>e.field===t[0].field&&e.operator===t[0].operator))));return c.length>0&&(s=c[0][1]),n.createElement(Rt.A,{options:r,onSelect:e=>i(e),selected:s,variant:"balladBold",semanticColor:"textBase",heading:o.ag.get("drop_down.filter_by")})},Lt=()=>{const{sortState:e,setSortState:t}=(0,n.useContext)(wt),a=new Map([[at,{key:"newest-to-oldest",value:o.ag.get("shows.sort.newest-to-oldest")}],[nt,{key:"oldest-to-newest",value:o.ag.get("shows.sort.oldest-to-newest")}],[rt,{key:"longest-to-shortest",value:o.ag.get("shows.sort.longest-to-shortest")}],[lt,{key:"shortest-to-longest",value:o.ag.get("shows.sort.shortest-to-longest")}]]),r=Array.from(a.values()),l=Array.from(a.keys()),i=(0,n.useCallback)((e=>{const n=l.find((t=>a.get(t)?.key===e));n&&t(n)}),[l,a,t]);if(!a.size||!e)return null;const s=Array.from(a.keys()).find((t=>t.field===e.field&&t.order===e.order)),c=a.get(s);return n.createElement(Rt.A,{options:r,onSelect:e=>i(e),selected:c,heading:o.ag.get("drop_down.sort_by")})},Ot="aQMtxnKeiJqZ9XCcDuZ7",Tt="TYB4Y2xQujO7cifhHush",Ft="YJlizbhw6DBPHT9OYbdj",_t="klz_XuZpllvTMzpJF1gw",Gt="TfjbWiK8hca4HHEBnonP",Xt="kR0M2WSYVUj4cohADSFM",Wt="ghfuv80I8uW_ymG_jfx9",Yt="jtfSxoRam9rzTtdXIjzc",jt="fejGrhq7pxGC99cUdyVw",Ht="T0OjvsNXAJJGd23eBG2m",Zt=()=>{const{canSort:e,canFilter:t}=(0,j.zZ)().capabilities;return n.createElement("div",{className:Xt},t&&n.createElement("div",{className:Yt},n.createElement(Bt,null)),!t&&n.createElement(c.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:jt},o.ag.get("mwp.podcast.all.episodes")),e&&n.createElement("div",{className:Wt},n.createElement(Lt,null)))},qt=({metadata:e,showId:t})=>{const{uri:a,trailer:r,topics:i,description:s,htmlDescription:m}=e,u=(0,d.o)(),g=(0,l.W6)(Qe.Cz),E=(0,Et.g)(),{sortState:y}=(0,n.useContext)(wt),{sortState:p}=(0,n.useContext)(St),k=(0,j.zZ)(),{usePlayContextItem:f}=(0,Y.n)({uri:a,metadata:{[ft.sb.SORTING_CRITERIA]:k.getPlayerSort(y),[ft.sb.FILTERING_PREDICATE]:k.getPlayerFilter(p)}},{featureIdentifier:"show"}),{isActive:b,isPlaying:h,togglePlay:v}=f({uri:r?.uri||""}),C=(0,n.useCallback)((()=>{u({intent:"expand-description",type:"click"})}),[u]),S=(0,bt.e)(e),w=(0,yt.s)(r,S),A=(0,n.useCallback)((()=>{r?.uri&&(E?w():(u({targetUri:r.uri,intent:h?"play":"pause",type:"click"}),v()))}),[w,E,h,u,v,r?.uri]),I=i.length>0,x=s||g&&m,D=x||I;return n.createElement("div",{className:Tt},n.createElement("div",{className:Ft},D&&n.createElement(n.Fragment,null,n.createElement(c.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:jt},o.ag.get("artist.about")),x&&n.createElement(q.o,{maxLines:4,content:(s||"").trim(),onExpanded:C,htmlContent:g&&m?m:void 0,LinkComponent:ae.Z}),I&&n.createElement(ie,{topics:i||[]})),n.createElement(dt,{showId:t,uri:a}),r&&n.createElement(pt._,{menu:n.createElement(gt.k,{uri:r.uri,showUri:a,sharingInfo:r.sharingInfo})},n.createElement(G,{label:o.ag.get("track-trailer"),className:Ht,images:r.coverArt||[],title:r.name,duration:r.duration.milliseconds,moreButton:n.createElement(N.y,{menu:n.createElement(gt.k,{uri:r.uri,sharingInfo:r.sharingInfo,showUri:a})},n.createElement(P.z,null)),onClick:A,isPlaying:h,isActive:b,size:_.LARGE,contentRating:r.contentRating?.label}))),n.createElement("div",{className:Gt,"data-testid":"show-all-episode-list"},n.createElement(Zt,null),n.createElement(Dt,{showMetadata:e,usePlayContextItem:f})),n.createElement(kt.k,{copyrights:[]}))};var Vt=a(51775);const Kt=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:r,name:l,podcastType:i,publisherName:s}=e,{isXSOnly:c,isSMOnly:m}=(0,Vt.e)(),u=c||m;return n.createElement(be.gF,{backgroundColor:t},n.createElement(he.W,null,n.createElement(ve.i,{text:l,dragUri:a,dragLabel:l})),n.createElement("div",{className:_t},n.createElement(pt._,{menu:n.createElement(st.M,{uri:a})},n.createElement(be.Oe,{loading:"eager",name:l,images:r,placeholderType:"show",shape:be.Kc.ROUNDED_CORNERS}))),n.createElement(be.sP,null,n.createElement(be.dy,{small:!0,uppercase:!0},"SHOW"===i?o.ag.get("type.show"):o.ag.get("type.podcast")),n.createElement(pt._,{menu:n.createElement(st.M,{uri:a})},n.createElement(be.xd,{dragUri:a,dragLabel:l},n.createElement("span",{"data-testid":"show-title"},l))),n.createElement(be.dy,{large:!u,medium:u,bold:!0},s)))};var Jt=a(16061),$t=a(19480);const Qt={totalCount:0,nextOffset:0,items:[]};const ea=({metadata:e})=>{const t=function(e){const t=(0,j.zZ)(),[a,r]=(0,n.useState)(Qt),l=(0,n.useCallback)((async()=>{const a=await t.getContents(e,{offset:0,limit:50});r(a)}),[e,t]);return(0,n.useEffect)((()=>{l()}),[l]),a}(e.uri);return n.createElement($t.P,{className:"contentSpacing",total:t.items.length,title:"user podcasts",tagline:"some subtitle",showAll:!0},t.items.map(((e,t)=>n.createElement(Jt.B,{key:e.uri,index:t,uri:e.uri,name:e.name,images:e.coverArt,showImages:[],durationMilliseconds:e.duration.milliseconds,releaseDate:e.releaseDate?.isoString,resume_point:null,description:e.description,isExplicit:!1,is19PlusOnly:!1,sharingInfo:e.sharingInfo}))))},ta=({metadata:e})=>n.createElement("section",null,n.createElement(i.$,null,"Podcasts from the user"),n.createElement(ea,{metadata:e})),aa=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,s=(0,W.Z)(a[0]?.url||null);return n.createElement("section",{className:Ot},n.createElement(i.$,null,o.ag.get("podcasts.show.seo.title",{name:r})),n.createElement(Kt,{metadata:e,backgroundColor:s}),n.createElement(mt,{uri:l,name:r,backgroundColor:s}),n.createElement(qt,{metadata:e,showId:t}))},na=n.memo((function(){const{showId:e}=(0,r.UO)(),t=`spotify:show:${e}`,a=(0,l.W6)(Qe.uB),i=(0,l.W6)(Qe.zR),c=(0,et.l)(t,a,i);return c?(0,we.l6)(c)?n.createElement(n.Suspense,{fallback:null},n.createElement($e,{metadata:c})):(0,we.MP)(c)?n.createElement(n.Suspense,{fallback:null},n.createElement(ta,{metadata:c})):n.createElement(n.Suspense,{fallback:null},n.createElement(Pt,{uri:c.uri},n.createElement(Nt,{uri:c.uri,defaultSortParam:it(c.consumptionOrder)},n.createElement(aa,{showId:e,metadata:c})))):n.createElement(s.h,{hasError:!1,errorMessage:o.ag.get("error.not_found.title.podcast")})}))},94233:(e,t,a)=>{a.d(t,{k:()=>o});var n=a(67294),r=a(28760);const l="rTMkDBDp47Eo12ZEQv4U",o=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(Â©\s+)/,"").replace(/^(â„—\s+)/,"");let l;return l="C"===e.type?"Â©":"P"===e.type?"â„—":`(${e.type})`,n.createElement(r.Dy,{as:"p",variant:"finale",key:t,dir:"auto"},`${l} ${a}`)}));return t&&a.unshift(n.createElement(r.Dy,{as:"p",variant:"finale",key:a.length,dir:"auto"},t)),n.createElement("div",{className:l},a)}},14535:(e,t,a)=>{a.d(t,{e:()=>m});var n=a(67294),r=a(20657),l=a(94184),o=a.n(l);const i="aAr9nYtPsG7P2LRzciXc",s="fBTYgGyvIbHizHIj7AAX",c="oUzIIkcyBdRs7hrwbwIo",m=n.memo((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:l}){const m=e?r.ag.get("following"):r.ag.get("follow");return n.createElement("button",{type:"button",className:o()(i,{[s]:e,[c]:a}),onClick:t},l||m)}))}}]);
//# sourceMappingURL=xpui-routes-show.js.map