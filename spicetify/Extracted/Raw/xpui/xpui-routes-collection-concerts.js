"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{40771:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(67154),c=a.n(n),o=a(67294),r=a(67892);const l=({href:e,children:t,...a})=>o.createElement(r.Z,c()({to:e},a),t)},22578:(e,t,a)=>{a.d(t,{$:()=>u});var n=a(67294),c=a(64593),o=a(20657),r=a(69691),l=a(8341),s=a(89952),i=a(52883),m=a(24183);function g(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const u=({children:e,usePlayingItem:t})=>{let a=g(e);(e=>{const{mainLandmarkRef:t}=(0,m.Oh)(),a=(0,i.k6)(),c=a.location?.state?.preventMoveFocus,o=(0,n.useRef)(a.length<2);o.current=a.length<2,(0,n.useEffect)((()=>{const a=t.current;!c&&!o.current&&a&&e&&(a.setAttribute("aria-label",e),a.focus())}),[e,t,c])})(e);const{isPlaying:u}=(0,r.IK)(),d=(0,l.Y)((e=>e?.item));return d&&(u||t)&&((0,s.G_)(d)?a=[d.name,d.artists.map((e=>e.name)).join(o.ag.getSeparator())].join(" • "):(0,s.iw)(d)?a=[d.name,d.show.name].join(" • "):(0,s.k6)(d)&&(a=g(o.ag.get("ad-formats.advertisement")))),n.createElement(c.q,{defaultTitle:"Spotify",defer:!1},n.createElement("title",null,a))}},70369:(e,t,a)=>{a.d(t,{$:()=>n.$});var n=a(22578)},19565:(e,t,a)=>{a.d(t,{u:()=>E});var n=a(67294),c=a(94184),o=a.n(c),r=a(28760),l=a(99450),s=a(51775),i=a(40771);const m="FvfvGU3jvHRskUU9v9_8",g="Q9AlbZn2EGzy3MTWXa8X",u="mxmxS0y8LiwSs5nueKPT",d="GXxVAveNFStY3pBI_NO4",h="eHcXC2s97InYP7rMNT0H",E=n.memo((function(e){const{children:t,message:a,title:c,linkTitle:E,linkTo:v,onClick:y,renderInline:f=!1}=e,{isXSOnly:p,isSMOnly:_}=(0,s.e)(),N=p||_;return n.createElement("section",{className:o()(m,{[g]:f})},t,n.createElement(r.Dy,{as:"h1",variant:N?"cello":"alto",className:d},c),n.createElement(r.Dy,{variant:N?"mesto":"ballad",className:h},a),E&&(v||y)&&n.createElement(l.D,{colorSet:"invertedLight",className:u,href:v,onClick:y,component:i.Z},E))}))},46145:(e,t,a)=>{a.d(t,{k:()=>N});var n=a(67294),c=a(9414),o=a(87722),r=a(28760),l=a(67892),s=a(94880),i=a(43315),m=a(9339);const g="wedRUk4eiBo9n9vqXLhU",u="HYVIJaYYiCTgSCHie70L",d="InXSbaoh8emJn09fWs3U",h="SPbe_Q1wtiZQCmo0QKUy",E="TRp4tgG7_cymGIXDevIP",v="tC1Y_nwyyly7cpIGqF5K",y="gY_xUHOSpAn6TPdU23t7",f="l93AfoV_qHnMQSQBB5GK",p="MTTf1Lotynwu3QKhr9uY",_="EkGb0ZzhswreSvpZoioY",N=n.memo((function(e){const{entity:t,isVirtual:a,shouldCombineRecs:N}=e,{venue:{name:C,location:{name:b}}}=t,D=t.artists[0],L=(0,m.ij)(t),S=new Date(t.date.isoString),k=a?c.F:o.n;return n.createElement(l.r,{to:`/concert/${t.id}`,className:g},D.imageUri?n.createElement(s.Z,null,n.createElement("div",{"data-testid":"image-container",className:_,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${D.imageUri})`}})):null,n.createElement("time",{className:u,dateTime:t.date.isoString},n.createElement(r.Dy,{as:"h5",variant:"minuetBold",className:d},`${(0,m.lJ)(S)} ${S.getDate()}`)),n.createElement("div",{className:h,dir:"auto"},n.createElement(r.Dy,{as:"h2",className:p,variant:"minuetBold"},(0,i.FO)(S)," • ",(0,m.b8)(S)),n.createElement(r.Dy,{as:"h2",variant:"cello",weight:"bold",className:E},L),n.createElement("div",{className:v},N?n.createElement(k,{className:y,"aria-label":a?"Virtual Event":"In-Person Event",iconSize:16}):null,n.createElement(r.Dy,{as:"h2",className:f,variant:"mesto","data-testid":"location-name"},a?C:`${C}, ${b}`))))}))},32668:(e,t,a)=>{a.d(t,{Z:()=>_});var n=a(67294),c=a(94184),o=a.n(c),r=a(76),l=a(7438),s=a(10149),i=a(28760),m=a(66668),g=a(20657),u=a(26529),d=a(26991),h=a(29854);const E={locationContainer:"mVOFnq7zSPRV_LEgGpDs",locationName:"C27SqjLS1_s0rqa7OD7c",clearSuggestions:"hdK8yppl_sXZMSQmtZtV",hide:"r81fr26QaEERPXCPrPVm",changeLocation:"zwc2XkLWpR92crAJXL21",changeLocationDropdown:"eIoX7T2txqK2JqzJ7cli",changeLocationInputLabel:"Uxx05DSAKPDiUaYLo6Ew",changeLocationInput:"gTFbh_EVVEzUrviFjNKF",searchInputSearchIcon:"pyzKam6u5Chz83qdtWo6",changeLocationLabel:"xVCe2YqliS5UBuqjBTDK",icon:"aZ5OJAP9JwXgm4pJq7UH",changeLocationList:"H1g1Ro1PNCH7OgfgaHkN",changeLocationError:"SjJTvKcJyhdrzQP74cfK",changeLocationLink:"KsT9JzIhvL6lWg8uKQf5",changeLocationItem:"VrqtBC4aYTinEAL4iLO7",button:"f0SQFZDLh_a6sga5nqr0",locationLink:"HEKoKqT_pboxiT4uXfxf"},v="location_no_results",y="location_fetch_error",f={[v]:()=>g.ag.get("concert.error.no_locations_found_subtitle"),[y]:()=>g.ag.get("concert.error.general_error_title")},p=e=>{const t=n.createRef(),a=n.createRef(),[c,p]=(0,n.useState)(""),[_,N]=(0,n.useState)(-1),[C,b]=(0,n.useState)([]),[D,L]=(0,n.useState)(null),{placeholder:S,onSelectLocation:k,hideLocationSelector:w}=e,I=(0,h.D)((()=>{d.LH.fetchLocationQuery(u.b.getInstance(),c).then((e=>{const{body:{results:t=[]}={}}=e;b(t),t.length?L(null):L(v)}),(()=>{b([]),L(y)}))}))(250),T=e=>{p(e),N(-1),b([]),L(null),e&&e.length>1&&I(e)};let M=o()(E.clearSuggestions,E.hide);return(C&&C.length||D===v)&&(M=E.clearSuggestions),n.createElement("div",{className:E.changeLocation,"data-interaction-context":"location-selector"},n.createElement("div",{className:E.changeLocationDropdown,onKeyDown:e=>{const n=38,c=40,o=27,r=9,l=e.which;let s=_;switch([o,c,n,r].indexOf(l)>-1&&e.preventDefault(),l){default:return;case o:return void k(null);case n:s=Math.max(_-1,-1);break;case c:case r:s=Math.min(_+1,C.length-1);break;case 13:k(C[_])}if(s<0)t.current.focus();else{const e=a.current.childNodes[s];e&&e.focus()}N(s)},role:"searchbox",onBlur:e=>{e.relatedTarget||(T(""),w())}},n.createElement("div",{className:E.changeLocationForm},n.createElement("div",{className:E.changeLocationLabel},n.createElement(l.j,{className:E.icon,iconSize:16}),n.createElement("input",{className:E.changeLocationInput,type:"search",id:"change-location-input",placeholder:S,value:c,onChange:e=>T(e.target.value),ref:t,"aria-label":S,autoFocus:!0}),n.createElement("button",{className:M,"aria-label":g.ag.get("search.a11y.clear-input"),onClick:()=>T("")},n.createElement(s.k,{iconSize:16})))),n.createElement("ol",{className:E.changeLocationList,ref:a},D&&n.createElement(i.Dy,{as:"li",variant:"ballad",className:E.changeLocationError},n.createElement(m.l,{iconSize:16}),f[D]()),C&&C.length&&C.map(((e,t)=>n.createElement(i.Dy,{as:"li",variant:"ballad",weight:"book",key:t,className:E.changeLocationItem,tabIndex:t+1},n.createElement(r.rU,{to:"#",className:E.changeLocationLink,onClick:()=>k(e),role:"button"},e.location))))||null)))},_=e=>{const{handleLocationChange:t,locationStr:a}=e,[c,o]=(0,n.useState)(!1);return n.createElement("div",{className:E.locationContainer},n.createElement(i.Dy,{as:"h1",variant:"alto"},g.ag.get("concerts_shows_in")),n.createElement("span",null,c&&n.createElement(p,{placeholder:g.ag.get("concerts.input.search_placeholder"),onSelectLocation:e=>{t(e),o(!1)},hideLocationSelector:()=>o(!1)}),!c&&n.createElement(i.Dy,{as:"h2",variant:"alto",className:E.locationName,dir:"auto",onClick:o,role:"button"},a)))}},1025:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(67294),c=a(46458),o=a(73012),r=a(87577),l=a(20657),s=a(6581),i=a(70369),m=a(19565),g=a(42273),u=a(59482),d=a(72907),h=a(1663),E=a(19480),v=a(49207),y=a(29255),f=a(51574),p=a(42922),_=a(31595),N=a(46145),C=a(21770),b=a(28760),D=a(94880),L=a(9339);const S={ConcertCard:"F7MwywVorrNKOgt7CEGy",date:"r4aK7GGCTY1vrPuSoGy6",dateMonth:"RX2kdQC6Fgc9h04mEgXx",metadata:"JpGXFGtOfmKH5mKCOMQw",title:"pN88b8jrYtBCrYGu35Al",locationData:"amTa2euxioUd0vU2jMf5",icon:"fIWvfaTkx3r3we4DA4NJ",location:"kDBnDrmS9eTQb2_g4Vku",fullDate:"T4LL7qOCu_01Szrx8Vnm",image:"Ko142eYEnV1xtSP5Vjk3"},k=n.memo((function(e){const{entity:t,onClick:a,openingDate:c,closingDate:o,concertsCount:r}=e,s=t.artists[0],i=(0,L.ij)(t);return n.createElement(C.oM,{onClick:a,className:S.ConcertCard,component:"div"},s.imageUri?n.createElement(D.Z,null,n.createElement("div",{"data-testid":"image-container",className:S.image,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${s.imageUri})`}})):null,n.createElement("time",{className:S.date,dateTime:t.date.isoString},n.createElement(b.Dy,{as:"h5",variant:"minuetBold",className:S.dateMonth},c.getMonth()===o.getMonth()?`${(0,L.lJ)(c)} ${c.getDate()}-${o.getDate()}`:`${(0,L.lJ)(c)} ${c.getDate()} - ${(0,L.lJ)(o)} ${o.getDate()}`)),n.createElement("div",{className:S.metadata,dir:"auto"},n.createElement(b.Dy,{as:"h2",variant:"cello",weight:"bold",className:S.title},i),n.createElement("div",{className:S.locationData},n.createElement(b.Dy,{as:"h2",className:S.concertsCount,variant:"mesto","data-testid":"concerts-count"},`${l.ag.get("concerts.count",r)}`))))}));var w=a(32668),I=a(10586),T=a(10149),M=a(82716),U=a(85105),K=a(67892);const G={concertsModal:"_HSbKteV9dfeHwGxcNg_",concertsContainer:"aWBUVnORYXxsyYkhLwA9",closeIconContainer:"my32elFymTSFRhPKDaLo",artistContainer:"YAGZg56IvTunyhaur40H",artistImage:"vmevmDz8WM9VvMmgoaWe",artistInfoContainer:"ac36K8GtTBXhfFPRfGTo",artistName:"hz2yJw4parzL0WK0rMng",row:"p_yAxEy29Xzm0fTvIg8T",date:"wC2qUh2SJBX1UEe9aQtV",dateMonth:"sUzcAnZ86exG3LZrvpf2",dateDay:"Ou1Z3dcAWteEuTiYJlkB",eventInfo:"EtOrJwt_4yhkrHWbxXy4",concertTitle:"M680KWddHfIaTZCTyULM",concertDate:"NjDfI7zPhvTXV8SjKcqq",concertVenue:"OEdqJZzUG2K9iXIn9RtC"},P=e=>{const{concert:t}=e,{isoString:a}=t.date,c=new Date(Date.parse(a)),o="ONLINE"===t.category,r=t.venue.name,l=t.venue.location.name,s=o?r:`${r}, ${l}`;return n.createElement(K.r,{key:t.id,to:`/concert/${t.id}`,className:G.row},n.createElement("time",{className:G.date,dateTime:a},n.createElement(b.Dy,{as:"h5",variant:"minuetBold",className:G.dateMonth},(0,L.lJ)(c)),n.createElement(b.Dy,{as:"h1",variant:"cello",className:G.dateDay},c.getDate())),n.createElement("div",{className:G.eventInfo},n.createElement(b.Dy,{as:"div",variant:"violaBold",className:G.concertTitle,"data-testid":"event-title"},(0,L.Yl)(t)),n.createElement(b.Dy,{as:"div",variant:"viola",className:G.concertDate},`${(0,L.cd)(c)} • ${(0,L.b8)(c)}`),n.createElement(b.Dy,{as:"div",variant:"viola",className:G.concertVenue,"data-testid":"event-venue"},s)))},O=n.memo((function({concerts:e,onClose:t,open:a,location:c}){if(0===e.length)return null;const o=e[0].artists[0];return n.createElement(U.Z,{contentLabel:l.ag.get("concerts.label"),isOpen:a,className:G.concertsModal,onRequestClose:t},n.createElement("section",{className:G.concertsContainer},n.createElement("div",{className:G.closeIconContainer},n.createElement(x,{"aria-label":l.ag.get("close"),iconOnly:T.k,buttonSize:"sm",onClick:t})),n.createElement("div",{className:G.artistContainer},n.createElement(M.Ee,{height:"48",width:"48",className:G.artistImage,src:o.imageUri}),n.createElement("div",{className:G.artistInfoContainer},n.createElement(b.Dy,{as:"h3",variant:"cello",className:G.artistName,"data-testid":"event-venue"},o.name),n.createElement(b.Dy,{as:"h3",variant:"mesto",className:G.concertsCount,"data-testid":"event-venue"},`${l.ag.get("concerts.count_near_location",e.length,c)}`))),e.map((e=>n.createElement(P,{key:e.uri,concert:e})))))}));var x=(0,I.ZP)(C.oM).withConfig({displayName:"GroupedConcerts___StyledButtonTertiary",componentId:"sc-1c9dnr3-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const F="wIVpEJ_zYWGyFUrvX08g",R="hSZRbryPAMeTRaXuUSlM",$="NrsEgNsURvcsSkUnT8yN",J={get Online(){return l.ag.get("concerts_upcoming_virtual_events")},get Recommended(){return l.ag.get("concerts_recommended_for_you")},get Popular(){return l.ag.get("concerts_popular_near_you")},get Playlists(){return l.ag.get("playlists")}},V=o.jN0,X=e=>{const{collection:t,concertMetadata:a,handleLocationChange:c,shouldCombineRecs:o,setShowGroupedConcerts:r,setGroupedConcerts:s}=e,i=t?.items||[],g=t?.isFetching,u=a.userLocation.name||l.ag.get("concerts.default_location"),d=e=>{if(!e.concerts||!e.concerts.length)return null;const t=e.concerts[0];return e.concerts.length>1?n.createElement(k,{key:t.uri,entity:t,openingDate:new Date(e.openingDate),closingDate:new Date(e.closingDate),concertsCount:e.concerts.length,onClick:()=>{s(e.concerts),r(!0)}}):n.createElement(N.k,{key:t.uri,entity:t,isVirtual:o?"ONLINE"===t.category:"online"===e.source,shouldCombineRecs:o})};if(g)return n.createElement(h.h,{hasError:!1,errorMessage:l.ag.get("error.request-browse-concerts-failure")});return n.createElement("div",{className:$},n.createElement("div",{className:F,"data-testid":"location-selector"},n.createElement(w.Z,{handleLocationChange:c,locationStr:u})),(()=>{if(!i.length)return n.createElement(m.u,{title:l.ag.get("concerts.error.no_concerts_found_title"),message:l.ag.get("concerts.error.no_concerts_found_message",u),renderInline:!0});const e=i.reduce(((e,t)=>("recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e)),{Online:[],Recommended:[],Popular:[]});return Object.keys(e).map(((t,a)=>{const c=e[t];return 0===c.length?null:n.createElement("div",{key:t,className:F},n.createElement(p.ZP,{value:"headered-grid",index:a},n.createElement(E.P,{total:c.length,title:J[t],showAll:!0},c.map(d))))}))})())},z=n.memo((function(){const e=(0,c.I0)(),t=(0,r.W6)(v.AW),{isAnonymous:a}=(0,c.v9)(y.Gg),o=(0,c.v9)((e=>e.concerts.collection)),m=(0,c.v9)((e=>e.concerts)),h=m.userLocation.name||l.ag.get("concerts.default_location"),E=m.userLocation.geonameId;(0,n.useEffect)((()=>{e((0,s.AJ)(E??null,a))}),[e,a,E]);const p=(0,_.Y)(V),[N,C]=(0,n.useState)(!1),[b,D]=(0,n.useState)([]);return n.createElement("section",{className:R},n.createElement(i.$,null,`${l.ag.get("concerts_shows_in")} ${h}`),n.createElement(g.gF,{size:g.fR.SMALL,backgroundColor:V},n.createElement(g.sP,null,n.createElement(g.xd,null,l.ag.get("concerts.label"))),n.createElement(u.W,null,n.createElement(d.i,{text:l.ag.get("concerts.label")}))),n.createElement(f.I,{backgroundColor:p}),n.createElement(X,{collection:o,concertMetadata:m,handleLocationChange:t=>{t&&t.geonameId&&(e((0,s.kz)(t)),e((0,s.AJ)(t.geonameId,a)))},shouldCombineRecs:t,setShowGroupedConcerts:C,setGroupedConcerts:D}),n.createElement(O,{location:h,concerts:b,onClose:()=>C(!1),open:N}))})),Y=e=>n.createElement(n.Suspense,{fallback:null},n.createElement(z,e))},9339:(e,t,a)=>{a.d(t,{Ms:()=>c,NL:()=>l,O1:()=>i,Yl:()=>u,b8:()=>o,cd:()=>s,ij:()=>d,lJ:()=>r});var n=a(20657);const c=e=>n.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}),o=e=>n.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),r=e=>n.ag.formatDate(e,{month:"short"}).toUpperCase(),l=e=>n.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase(),s=e=>n.ag.formatDate(e,{weekday:"short"}),i=e=>e<new Date,m={row:{1:e=>n.ag.get("concert.header.entity_title_1",...e),2:e=>n.ag.get("concert.header.entity_title_2",...e),3:e=>n.ag.get("concert.header.entity_title_3",...e),4:e=>n.ag.get("concert.header.entity_title_4",...e),more:e=>n.ag.get("concert.header.entity_title_more",...e)},entity:{1:e=>n.ag.get("concert.header.upcoming_concert_title_1",...e),2:e=>n.ag.get("concert.header.upcoming_concert_title_2",...e),3:e=>n.ag.get("concert.header.upcoming_concert_title_3",...e),4:e=>n.ag.get("concert.header.upcoming_concert_title_4",...e),more:e=>n.ag.get("concert.header.upcoming_concert_title_more",...e)}},g=(e,t)=>{const a=m[t],n=(e=>{try{return!e.title||!e.festival&&e.artists?.length?{artists:e.artists.map((e=>e.name||e.profile.name))}:{title:e.title}}catch(e){return null}})(e);if(n){if(n.title)return n.title;if(n.artists)return n.artists.length>4?a.more(n.artists):a[n.artists.length](n.artists)}return""},u=e=>g(e,"row"),d=e=>g(e,"entity")}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map